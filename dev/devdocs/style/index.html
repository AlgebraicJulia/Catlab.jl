<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Style Guide for AlgebraicJulia · Catlab.jl</title><meta name="title" content="Style Guide for AlgebraicJulia · Catlab.jl"/><meta property="og:title" content="Style Guide for AlgebraicJulia · Catlab.jl"/><meta property="twitter:title" content="Style Guide for AlgebraicJulia · Catlab.jl"/><meta name="description" content="Documentation for Catlab.jl."/><meta property="og:description" content="Documentation for Catlab.jl."/><meta property="twitter:description" content="Documentation for Catlab.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><script src="../../assets/analytics.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Catlab.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Catlab.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Catlab.jl</a></li><li><span class="tocitem">Vignettes</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Seven Sketches in Compositionality</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/sketches/partitions/">Partitions</a></li><li><a class="tocitem" href="../../generated/sketches/preorders/">Preorders</a></li><li><a class="tocitem" href="../../generated/sketches/meets/">Meets in Preorders</a></li><li><a class="tocitem" href="../../generated/sketches/smc/">Symmetric Monoidal Categories</a></li><li><a class="tocitem" href="../../generated/sketches/cat_elements/">The Category of Elements</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Graphs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/graphs/graphs/">The Category of Graphs</a></li><li><a class="tocitem" href="../../generated/graphs/graphs_label/">Labeled Graphs</a></li><li><a class="tocitem" href="../../generated/graphs/subgraphs/">Algebra of subgraphs</a></li></ul></li><li><span class="tocitem">Categorical Algebra</span></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Wiring Diagrams</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/wiring_diagrams/wiring_diagram_basics/">Basics of wiring diagrams</a></li><li><a class="tocitem" href="../../generated/wiring_diagrams/diagrams_and_expressions/">Wiring diagrams and syntactic expressions</a></li><li><a class="tocitem" href="../../generated/wiring_diagrams/wd_cset/">Wiring Diagrams as Attributed C-Sets</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Graphics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/graphics/graphviz_graphs/">Drawing graphs in Graphviz</a></li><li><a class="tocitem" href="../../generated/graphics/graphviz_wiring_diagrams/">Drawing wiring diagrams in Graphviz</a></li><li><a class="tocitem" href="../../generated/graphics/composejl_wiring_diagrams/">Drawing wiring diagrams in Compose.jl</a></li><li><a class="tocitem" href="../../generated/graphics/tikz_wiring_diagrams/">Drawing wiring diagrams in TikZ</a></li><li><a class="tocitem" href="../../generated/graphics/layouts_vs_drawings/">Layouts versus drawings of wiring diagrams</a></li></ul></li></ul></li><li><span class="tocitem">Modules</span><ul><li><a class="tocitem" href="../../apis/theories/">Standard library of theories</a></li><li><a class="tocitem" href="../../apis/categorical_algebra/">Categorical algebra</a></li><li><a class="tocitem" href="../../apis/graphs/">Graphs</a></li><li><a class="tocitem" href="../../apis/wiring_diagrams/">Wiring diagrams</a></li><li><a class="tocitem" href="../../apis/graphics/">Graphics</a></li><li><a class="tocitem" href="../../apis/programs/">Programs</a></li></ul></li><li><span class="tocitem">Developer Docs</span><ul><li class="is-active"><a class="tocitem" href>Style Guide for AlgebraicJulia</a><ul class="internal"><li><a class="tocitem" href="#Folder-structure"><span>Folder structure</span></a></li><li><a class="tocitem" href="#Naming-conventions"><span>Naming conventions</span></a></li><li><a class="tocitem" href="#General-style-tips"><span>General style tips</span></a></li><li><a class="tocitem" href="#Guidelines-for-pull-requests"><span>Guidelines for pull requests</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer Docs</a></li><li class="is-active"><a href>Style Guide for AlgebraicJulia</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Style Guide for AlgebraicJulia</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/Catlab.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/Catlab.jl/blob/main/docs/src/devdocs/style.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Style-Guide-for-AlgebraicJulia"><a class="docs-heading-anchor" href="#Style-Guide-for-AlgebraicJulia">Style Guide for AlgebraicJulia</a><a id="Style-Guide-for-AlgebraicJulia-1"></a><a class="docs-heading-anchor-permalink" href="#Style-Guide-for-AlgebraicJulia" title="Permalink"></a></h1><p>The purpose of this document is to have a consistent style across AlgebraicJulia, for interests of maintainability and professionalism.</p><h2 id="Folder-structure"><a class="docs-heading-anchor" href="#Folder-structure">Folder structure</a><a id="Folder-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Folder-structure" title="Permalink"></a></h2><p>We follow the Julia project folder structure, where the most important elements are</p><ul><li>A <code>Project.toml</code> file, describing dependencies and metadata.</li><li>A <code>src</code> directory. Most functionality should be implemented in this directory.</li><li>A <code>test</code> directory. Functionality implemented in <code>src</code> should be tested here.</li><li>A <code>README.md</code>. This should describe the purpose of the project.</li></ul><p>Additional directories one might also use</p><ul><li>A <code>notebooks</code> directory for explanatory notebooks.</li><li>A <code>docs</code> directory with <code>Documenter.jl</code>-generated docs.</li><li>A <code>scripts</code> directory with executable scripts. Note: these scripts should not contain many functions or types, they should be thin wrappers around functions from <code>src</code>. It is acceptable to develop some functionality in a script if that functionality is eventually migrated into <code>src</code>.</li></ul><p>For most repositories in AlgebraicJulia, this should describe the top-level structure. However, some repositories might be multi-project. In that case, there is a top-level directory consisting of project directories, some of which may depend on each other.</p><h2 id="Naming-conventions"><a class="docs-heading-anchor" href="#Naming-conventions">Naming conventions</a><a id="Naming-conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Naming-conventions" title="Permalink"></a></h2><p>There are two ways of joining words together without spaces that are in use across AlgebraicJulia.</p><ol><li><p>UpperCamelCase, in which each word is capitalized, and then joined together without a separating character.</p></li><li><p>lower_snake_case, in which each word is lowercase, and then joined together with underscores. The use of uppercase acronyms in lower_snake_case is tolerable but discouraged.</p></li></ol><p>Occasionally, it is also acceptable to join lowercase words together without underscores, e.g., <code>setindex!</code> instead of <code>set_index!</code>; judgement about readability and consistency should be used when making the decision to use underscores or not.</p><p>Here are some example of names that are <strong>not</strong> consistent with the AlgebraicJulia style.</p><ul><li><code>camelCase</code></li><li><code>UpperCamel_and_snake</code></li><li><code>Dashed-name</code></li></ul><h3 id="Projects"><a class="docs-heading-anchor" href="#Projects">Projects</a><a id="Projects-1"></a><a class="docs-heading-anchor-permalink" href="#Projects" title="Permalink"></a></h3><p>Projects should be named using UpperCamelCase with a <code>.jl</code> suffix, e.g. AlgebraicPetri.jl or Semagrams.jl.</p><h3 id="Files-and-directories"><a class="docs-heading-anchor" href="#Files-and-directories">Files and directories</a><a id="Files-and-directories-1"></a><a class="docs-heading-anchor-permalink" href="#Files-and-directories" title="Permalink"></a></h3><p>Directories should all be lower_snake_case, except for top-level directories that are named after projects.</p><p>Library julia files and test julia files should be named with UpperCamelCase. Scripts and notebooks should be lower_snake_case.</p><h3 id="Julia-values"><a class="docs-heading-anchor" href="#Julia-values">Julia values</a><a id="Julia-values-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-values" title="Permalink"></a></h3><p>Modules and types should always be UpperCamelCase. Functions should always be lower_snake_case, and ideally single words. Constants should be lower_snake_case, or occasionally <code>SCREAMING_SNAKE_CASE</code> (judgement should be exercised about use of <code>SCREAMING_SNAKE_CASE</code>). Fields of structs should be lower_snake_case, or ideally lowercase single words.</p><p>Arguments to functions should have short names, often just single letters. If your function is so specific that the arguments need to be described with long argument names, consider generalizing your function. If arguments need to be longer, then lower_snake_case should be used. Additionally, you can use types and comments to document what a variable is for instead of making the names long. Some examples:</p><pre><code class="language-julia hljs">f(a_natural_number) # BAD
f(n::Nat) # GOOD
f(graph, vector_of_weights) # BAD
f(g::AbstractGraph, v::AbstractVector) # GOOD</code></pre><h2 id="General-style-tips"><a class="docs-heading-anchor" href="#General-style-tips">General style tips</a><a id="General-style-tips-1"></a><a class="docs-heading-anchor-permalink" href="#General-style-tips" title="Permalink"></a></h2><p>See the official <a href="https://docs.julialang.org/en/v1/manual/style-guide/">Julia style guide</a> for general guidelines but note the following additions and exceptions:</p><ul><li>Indent width is <strong>2 spaces</strong>. For VSCode, go to settings and set <code>Editor: Tab Size</code> to 2.</li><li>Try to avoid lines longer than <strong>80 characters</strong>. Occasionally it may be convenient to go over slightly, but never do so egregiously. To hard wrap docstrings in VSCode, the extension <a href="https://marketplace.visualstudio.com/items?itemName=stkb.rewrap">Rewrap</a> adds the keybinding <code>Alt+Q</code> (as in Emacs).</li><li>Introduce a new struct when many (≥3) functions have overlapping arguments that are common aspects of a shared concept</li><li>Catlab uses modules more often than most Julia packages. While this may be idiosyncratic, it helps keep different components of Catlab isolated, which will be useful in the future when we spin out modules as their own packages.</li><li>Prefer accessor and mutator functions (e.g. <code>dom(f)</code>) over direct manipulation of struct fields or keys (e.g. <code>f.dom</code>), especially when the functions already exist. This convention supports writing generic code and makes it easier to change data structure internals without breaking existing code.</li><li>In long files, using comment headers can improve readability and navigability. Top-level headers and sub-headers should be formatted as:</li></ul><pre><code class="language-julia hljs"># Section
#########

# Subsection
#-----------</code></pre><h2 id="Guidelines-for-pull-requests"><a class="docs-heading-anchor" href="#Guidelines-for-pull-requests">Guidelines for pull requests</a><a id="Guidelines-for-pull-requests-1"></a><a class="docs-heading-anchor-permalink" href="#Guidelines-for-pull-requests" title="Permalink"></a></h2><p>Every pull request to Catlab should be reviewed by at least one person. Following are some things to check when making a PR yourself or reviewing someone else&#39;s PR. The goal of this list is to ensure that the Catlab codebase is robust and maintainable. When any of these guidelines are violated, it should be documented in a comment on the PR page.</p><p><strong>Note</strong>: This list only includes the mechanical things. When a reviewing a PR you should always use your own judgment in asking questions and making comments about API and algorithm design. That&#39;s the hard part!</p><h3 id="Tests-and-code-coverage"><a class="docs-heading-anchor" href="#Tests-and-code-coverage">Tests and code coverage</a><a id="Tests-and-code-coverage-1"></a><a class="docs-heading-anchor-permalink" href="#Tests-and-code-coverage" title="Permalink"></a></h3><ul><li>Enhancements (new features) must have accompanying unit tests</li><li>Bug fixes should come with unit tests exposing the bug, unless producing a minimal example is unusually difficult</li><li>Do not delete existing unit tests, unless you have a very good reason (e.g., the relevant functionality is being moved to another package), which is documented in the PR</li><li>If you are adding a new module, make sure to add the test module to the test runner (<code>test/runtests.jl</code> or file included therein)</li><li>Code coverage on the Catlab repo exceeds 90% and we try to keep it that way. We do not insist on 100% coverage, which is impractical, nor do we set a hard threshold applicable to all PRs, but generally you should aim for 90%+ code coverage. Any reductions in test coverage should be justified in the PR.</li></ul><h3 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h3><ul><li>All exported functions, types, and constants must have docstrings</li><li>Docstrings should be written in complete sentences, with correct capitalization and punctuation. Likewise for comments, except for fragmentary end-of-line comments.</li><li>Where possible, provide citations for constructions and algorithms that you implement. This reflects good scholarly values and also aids the understanding of your code by other people.</li></ul><h3 id="Version-control"><a class="docs-heading-anchor" href="#Version-control">Version control</a><a id="Version-control-1"></a><a class="docs-heading-anchor-permalink" href="#Version-control" title="Permalink"></a></h3><ul><li>Commit messages should be informative and be written in complete sentences</li><li>Avoid one-word commit messages like &quot;fix&quot; or &quot;bug&quot;. If you need to make very simple fixes on your branch, amend a previous commit and force push.</li><li>Avoid repeatedly merging the main branch back into your PR branch. Instead, rebase off main and force push.</li></ul><h3 id="Backwards-compatibility"><a class="docs-heading-anchor" href="#Backwards-compatibility">Backwards compatibility</a><a id="Backwards-compatibility-1"></a><a class="docs-heading-anchor-permalink" href="#Backwards-compatibility" title="Permalink"></a></h3><p>Reflecting Catlab&#39;s dual status as a research project and a user-facing library, we want to give ourselves space to experiment while also not annoying our users and each other by needlessly breaking things.</p><ul><li>Like other Julia packages, Catlab aims to follow <a href="https://pkgdocs.julialang.org/v1/compatibility/">semantic versioning</a></li><li>All else equal, it is better to make breaking changes to new APIs, especially very new ones, than old APIs</li><li>If you plan to make major breaking changes, please coordinate with the senior developers to ensure that it makes senses and aligns with the release schedule</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../apis/programs/">« Programs</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 26 February 2024 21:35">Monday 26 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
