<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basics of wiring diagrams · Catlab.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Catlab.jl</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Catlab.jl</a></li><li><span class="tocitem">Vignettes</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox" checked/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Wiring diagrams</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Basics of wiring diagrams</a><ul class="internal"><li><a class="tocitem" href="#Data-structures-1"><span>Data structures</span></a></li><li><a class="tocitem" href="#Categorical-interface-1"><span>Categorical interface</span></a></li><li><a class="tocitem" href="#Imperative-interface-1"><span>Imperative interface</span></a></li></ul></li><li><a class="tocitem" href="../diagrams_and_expressions/">Wiring diagrams and syntactic expressions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Graphics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../graphics/composejl_wiring_diagrams/">Wiring diagrams in Compose.jl</a></li><li><a class="tocitem" href="../../graphics/graphviz_wiring_diagrams/">Wiring diagrams in Graphviz</a></li><li><a class="tocitem" href="../../graphics/tikz_wiring_diagrams/">Wiring diagrams in TikZ</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Experimental features</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../programs/algebraic_nets/">Algebraic networks</a></li></ul></li></ul></li><li><span class="tocitem">Modules</span><ul><li><a class="tocitem" href="../../../apis/core/">Symbolic expressions</a></li><li><a class="tocitem" href="../../../apis/doctrines/">Doctrines</a></li><li><a class="tocitem" href="../../../apis/wiring_diagrams/">Wiring diagrams</a></li><li><a class="tocitem" href="../../../apis/graphics/">Graphics</a></li><li><a class="tocitem" href="../../../apis/programs/">Programs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Vignettes</a></li><li><a class="is-disabled">Wiring diagrams</a></li><li class="is-active"><a href>Basics of wiring diagrams</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basics of wiring diagrams</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/epatters/Catlab.jl/blob/master/docs/literate/wiring_diagrams/wiring_diagram_basics.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Basics-of-wiring-diagrams-1"><a class="docs-heading-anchor" href="#Basics-of-wiring-diagrams-1">Basics of wiring diagrams</a><a class="docs-heading-anchor-permalink" href="#Basics-of-wiring-diagrams-1" title="Permalink"></a></h1><p><a href="https://nbviewer.jupyter.org/github/epatters/Catlab.jl/blob/gh-pages/dev/generated/wiring_diagrams/wiring_diagram_basics.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><p>Using Catlab, you can create, manipulate, serialize, and visualize <em>wiring diagrams</em>, also known as <a href="https://ncatlab.org/nlab/show/string+diagram">string diagrams</a>. The flexible data structure for wiring diagrams allows arbitrary data to be attached to boxes, ports, and wires, and supports recursively nested diagrams.</p><p>You can interact with wiring diagrams using two different progamming interfaces:</p><ol><li><p><strong>Categorical</strong>: A high-level, functional interface expressed in terms of categorical concepts, such as composition (<code>compose</code>), monoidal products (<code>otimes</code>), duplication (<code>mcopy</code>), and deletion (<code>delete</code>).</p></li><li><p><strong>Imperative</strong>: A lower-level, mutating interface to directly manipulate boxes, ports, and wires, via operations like adding boxes (<code>add_box</code>) and wires (<code>add_wire</code>).</p></li></ol><p>In this notebook, we introduce both interfaces. We do not explicitly cover the visualization API, although for illustrative purposes we will draw wiring diagrams using Graphviz. Thus, you should install <a href="https://www.graphviz.org/">Graphviz</a> if you wish to run this notebook.</p><pre><code class="language-julia">using Catlab.WiringDiagrams

using Catlab.Graphics
import Catlab.Graphics: Graphviz

show_diagram(d::WiringDiagram) = to_graphviz(d,
  orientation=LeftToRight,
  labels=true, label_attr=:xlabel,
  node_attrs=Graphviz.Attributes(
    :fontname =&gt; &quot;Courier&quot;,
  ),
  edge_attrs=Graphviz.Attributes(
    :fontname =&gt; &quot;Courier&quot;,
  )
)</code></pre><pre><code class="language-none">show_diagram (generic function with 1 method)</code></pre><h2 id="Data-structures-1"><a class="docs-heading-anchor" href="#Data-structures-1">Data structures</a><a class="docs-heading-anchor-permalink" href="#Data-structures-1" title="Permalink"></a></h2><p>The basic building blocks of a wiring diagram are boxes, ports, and wires. The top-level data structure is <code>WiringDiagram</code>, defined in the module <code>Catlab.WiringDiagrams</code>. A wiring diagram consists of boxes (usually of type <code>Box</code>) connected by wires (of type <code>Wire</code>). Each box has a sequence of input ports and a sequence of output ports, as does the wiring diagram itself. The wires have sources and targets, both of which consist of a box and a port on that box.</p><p>The boxes in a wiring diagram are indexed by integer IDs. Boxes can be retrieved by ID, and wires refer to boxes using their IDs. Two special IDs, obtained by <code>input_id</code> and <code>output_id</code> methods, refer to the inputs and outputs of the diagram itself. In this way, wires can connect the (inner) boxes of a diagram to the diagram&#39;s &quot;outer box&quot;.</p><p>The <code>WiringDiagram</code> data structure is an elaborate wrapper around a directed graph from <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs.jl</a>. The underlying <code>DiGraph</code> object can be accessed using the <code>graph</code> method. The vertices of this graph are exactly the box IDs. The graph should never be mutated directly, on pain of creating inconsistent state, but it does allow convenient access to the large array of <a href="https://juliagraphs.github.io/LightGraphs.jl/latest/">graph algorithms</a> supported by LightGraphs.</p><p>All this is somewhat abstract but should become clearer as we see concrete examples.</p><h2 id="Categorical-interface-1"><a class="docs-heading-anchor" href="#Categorical-interface-1">Categorical interface</a><a class="docs-heading-anchor-permalink" href="#Categorical-interface-1" title="Permalink"></a></h2><p>In this example, the wiring diagrams will carry symbolic expressions (of type <code>Catlab.ObExpr</code> and <code>Catlab.HomExpr</code>).</p><pre><code class="language-julia">using Catlab.Doctrines

A, B, C, D = Ob(FreeBiproductCategory, :A, :B, :C, :D)
f = Hom(:f, A, B)
g = Hom(:g, B, C)
h = Hom(:h, C, D)

f</code></pre><div>\[f : A \to B\]</div><h3 id="Generators-1"><a class="docs-heading-anchor" href="#Generators-1">Generators</a><a class="docs-heading-anchor-permalink" href="#Generators-1" title="Permalink"></a></h3><p>Convert each of the morphism generators into a diagram with a single box.</p><pre><code class="language-julia">f, g, h = to_wiring_diagram(f), to_wiring_diagram(g), to_wiring_diagram(h)
f</code></pre><pre><code class="language-none">WiringDiagram{Catlab.Doctrines.BiproductCategory.Hom}([:A], [:B], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
  3 =&gt; Box(:f, [:A], [:B]) ],
[ Wire((1,1) =&gt; (3,1)),
  Wire((3,1) =&gt; (2,1)) ])</code></pre><pre><code class="language-julia">show_diagram(f)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="147pt" height="37pt"
 viewBox="0.00 0.00 147.00 36.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 32.5)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-32.5 143,-32.5 143,4 -4,4"/>
<!-- n1p1 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-3 60.5,-28 79.5,-28 79.5,-3 60.5,-3"/>
<text text-anchor="start" x="65.5" y="-11.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-15C38.3212,-15 43.1602,-15 55.259,-15"/>
<polygon fill="#000000" stroke="#000000" points="55.5,-16.7501 60.5,-15 55.5,-13.2501 55.5,-16.7501"/>
<text text-anchor="middle" x="37.646" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n2p1 -->
<!-- n3&#45;&gt;n2p1 -->
<!-- B -->
<g id="e2" class="edge">
<title>n3:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M79,-15C93.125,-15 97.8977,-15 109.8308,-15"/>
<polygon fill="#000000" stroke="#000000" points="110,-16.7501 115,-15 110,-13.2501 110,-16.7501"/>
<text text-anchor="middle" x="92.3975" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
</g>
</svg>

<h3 id="Composition-1"><a class="docs-heading-anchor" href="#Composition-1">Composition</a><a class="docs-heading-anchor-permalink" href="#Composition-1" title="Permalink"></a></h3><pre><code class="language-julia">compose(f,g)</code></pre><pre><code class="language-none">WiringDiagram{Catlab.Doctrines.BiproductCategory.Hom}([:A], [:C], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
  3 =&gt; Box(:f, [:A], [:B]),
  4 =&gt; Box(:g, [:B], [:C]) ],
[ Wire((1,1) =&gt; (3,1)),
  Wire((3,1) =&gt; (4,1)),
  Wire((4,1) =&gt; (2,1)) ])</code></pre><pre><code class="language-julia">show_diagram(compose(f,g))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="202pt" height="37pt"
 viewBox="0.00 0.00 202.00 36.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 32.5)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-32.5 198,-32.5 198,4 -4,4"/>
<!-- n1p1 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-3 60.5,-28 79.5,-28 79.5,-3 60.5,-3"/>
<text text-anchor="start" x="65.5" y="-11.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-15C38.3212,-15 43.1602,-15 55.259,-15"/>
<polygon fill="#000000" stroke="#000000" points="55.5,-16.7501 60.5,-15 55.5,-13.2501 55.5,-16.7501"/>
<text text-anchor="middle" x="37.646" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n2p1 -->
<!-- n4 -->
<!-- g -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="#000000" points="115.5,-3 115.5,-28 134.5,-28 134.5,-3 115.5,-3"/>
<text text-anchor="start" x="120.5" y="-11.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">g</text>
</g>
<!-- n3&#45;&gt;n4 -->
<!-- B -->
<g id="e2" class="edge">
<title>n3:e&#45;&gt;n4:w</title>
<path fill="none" stroke="#000000" d="M79,-15C93.3212,-15 98.1602,-15 110.259,-15"/>
<polygon fill="#000000" stroke="#000000" points="110.5,-16.7501 115.5,-15 110.5,-13.2501 110.5,-16.7501"/>
<text text-anchor="middle" x="92.646" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n4&#45;&gt;n2p1 -->
<!-- C -->
<g id="e3" class="edge">
<title>n4:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M134,-15C148.125,-15 152.8977,-15 164.8308,-15"/>
<polygon fill="#000000" stroke="#000000" points="165,-16.7501 170,-15 165,-13.2501 165,-16.7501"/>
<text text-anchor="middle" x="147.3975" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">C</text>
</g>
</g>
</svg>

<h3 id="Monoidal-products-1"><a class="docs-heading-anchor" href="#Monoidal-products-1">Monoidal products</a><a class="docs-heading-anchor-permalink" href="#Monoidal-products-1" title="Permalink"></a></h3><pre><code class="language-julia">otimes(f,h)</code></pre><pre><code class="language-none">WiringDiagram{Catlab.Doctrines.BiproductCategory.Hom}([:A,:C], [:B,:D], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
  3 =&gt; Box(:f, [:A], [:B]),
  4 =&gt; Box(:h, [:C], [:D]) ],
[ Wire((1,1) =&gt; (3,1)),
  Wire((1,2) =&gt; (4,1)),
  Wire((3,1) =&gt; (2,1)),
  Wire((4,1) =&gt; (2,2)) ])</code></pre><pre><code class="language-julia">show_diagram(otimes(f,h))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="147pt" height="77pt"
 viewBox="0.00 0.00 147.00 76.53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 72.5308)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-72.5308 143,-72.5308 143,4 -4,4"/>
<!-- n1p1 -->
<!-- n1p2 -->
<!-- n1p1&#45;&gt;n1p2 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-43.0308 60.5,-68.0308 79.5,-68.0308 79.5,-43.0308 60.5,-43.0308"/>
<text text-anchor="start" x="65.5" y="-51.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-49.0308C38.5134,-49.0308 43.0355,-53.7069 55.2072,-54.8029"/>
<polygon fill="#000000" stroke="#000000" points="55.4293,-56.564 60.5,-55.0308 55.5799,-53.0672 55.4293,-56.564"/>
<text text-anchor="middle" x="37.6472" y="-40.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n4 -->
<!-- h -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="#000000" points="60.5,-.0308 60.5,-25.0308 79.5,-25.0308 79.5,-.0308 60.5,-.0308"/>
<text text-anchor="start" x="65.5" y="-8.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">h</text>
</g>
<!-- n1p2&#45;&gt;n4 -->
<!-- C -->
<g id="e2" class="edge">
<title>n1p2:e&#45;&gt;n4:w</title>
<path fill="none" stroke="#000000" d="M24,-18.0308C38.5134,-18.0308 43.0355,-13.3546 55.2072,-12.2586"/>
<polygon fill="#000000" stroke="#000000" points="55.5799,-13.9943 60.5,-12.0308 55.4293,-10.4975 55.5799,-13.9943"/>
<text text-anchor="middle" x="37.6472" y="-3.8615" font-family="Courier,monospace" font-size="14.00" fill="#000000">C</text>
</g>
<!-- n2p1 -->
<!-- n2p2 -->
<!-- n2p1&#45;&gt;n2p2 -->
<!-- n3&#45;&gt;n2p1 -->
<!-- B -->
<g id="e3" class="edge">
<title>n3:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M79,-55.0308C93.3198,-55.0308 97.7714,-50.3546 109.7783,-49.2586"/>
<polygon fill="#000000" stroke="#000000" points="110.0811,-50.9972 115,-49.0308 109.9284,-47.5005 110.0811,-50.9972"/>
<text text-anchor="middle" x="92.3986" y="-40.8615" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n4&#45;&gt;n2p2 -->
<!-- D -->
<g id="e4" class="edge">
<title>n4:e&#45;&gt;n2p2:w</title>
<path fill="none" stroke="#000000" d="M79,-12.0308C93.3198,-12.0308 97.7714,-16.7069 109.7783,-17.8029"/>
<polygon fill="#000000" stroke="#000000" points="109.9284,-19.561 115,-18.0308 110.0811,-16.0643 109.9284,-19.561"/>
<text text-anchor="middle" x="92.3986" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">D</text>
</g>
</g>
</svg>

<h3 id="Copy-and-merge,-delete-and-create-1"><a class="docs-heading-anchor" href="#Copy-and-merge,-delete-and-create-1">Copy and merge, delete and create</a><a class="docs-heading-anchor-permalink" href="#Copy-and-merge,-delete-and-create-1" title="Permalink"></a></h3><pre><code class="language-julia">mcopy(codom(f),2)</code></pre><pre><code class="language-none">WiringDiagram{Catlab.Doctrines.BiproductCategory.Hom}([:B], [:B,:B], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
   ],
[ Wire((1,1) =&gt; (2,1)),
  Wire((1,1) =&gt; (2,2)) ])</code></pre><pre><code class="language-julia">show_diagram(mcopy(codom(f),2))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="92pt" height="38pt"
 viewBox="0.00 0.00 92.00 37.95" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 33.9539)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-33.9539 88,-33.9539 88,4 -4,4"/>
<!-- n1p1 -->
<!-- n2p1 -->
<!-- n1p1&#45;&gt;n2p1 -->
<!-- B -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M24,-19.4539C38.7896,-19.4539 42.6189,-27.386 55.0109,-29.1211"/>
<polygon fill="#000000" stroke="#000000" points="54.8946,-30.8672 60,-29.4539 55.1276,-27.3749 54.8946,-30.8672"/>
<text text-anchor="middle" x="46.5284" y="-13.2685" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n2p2 -->
<!-- n1p1&#45;&gt;n2p2 -->
<!-- B -->
<g id="e2" class="edge">
<title>n1p1:e&#45;&gt;n2p2:w</title>
<path fill="none" stroke="#000000" d="M24,-19.4539C38.5597,-19.4539 42.6158,-12.4396 54.7138,-10.7957"/>
<polygon fill="#000000" stroke="#000000" points="55.1234,-12.5229 60,-10.4539 54.8975,-9.0302 55.1234,-12.5229"/>
<text text-anchor="middle" x="37.4" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n2p1&#45;&gt;n2p2 -->
</g>
</svg>

<pre><code class="language-julia">show_diagram(compose(f, mcopy(codom(f),2)))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="147pt" height="41pt"
 viewBox="0.00 0.00 147.00 40.95" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 36.9539)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-36.9539 143,-36.9539 143,4 -4,4"/>
<!-- n1p1 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-7.4539 60.5,-32.4539 79.5,-32.4539 79.5,-7.4539 60.5,-7.4539"/>
<text text-anchor="start" x="65.5" y="-16.2539" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-19.4539C38.3212,-19.4539 43.1602,-19.4539 55.259,-19.4539"/>
<polygon fill="#000000" stroke="#000000" points="55.5,-21.204 60.5,-19.4539 55.5,-17.704 55.5,-21.204"/>
<text text-anchor="middle" x="37.646" y="-8.2539" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n2p1 -->
<!-- n2p2 -->
<!-- n2p1&#45;&gt;n2p2 -->
<!-- n3&#45;&gt;n2p1 -->
<!-- B -->
<g id="e2" class="edge">
<title>n3:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M79,-19.4539C93.7896,-19.4539 97.6189,-27.386 110.0109,-29.1211"/>
<polygon fill="#000000" stroke="#000000" points="109.8946,-30.8672 115,-29.4539 110.1276,-27.3749 109.8946,-30.8672"/>
<text text-anchor="middle" x="101.5284" y="-13.2685" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n3&#45;&gt;n2p2 -->
<!-- B -->
<g id="e3" class="edge">
<title>n3:e&#45;&gt;n2p2:w</title>
<path fill="none" stroke="#000000" d="M79,-19.4539C93.5597,-19.4539 97.6158,-12.4396 109.7138,-10.7957"/>
<polygon fill="#000000" stroke="#000000" points="110.1234,-12.5229 115,-10.4539 109.8975,-9.0302 110.1234,-12.5229"/>
<text text-anchor="middle" x="92.4" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
</g>
</svg>

<pre><code class="language-julia">show_diagram(compose(mcopy(dom(f),2), otimes(f,f)))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="147pt" height="77pt"
 viewBox="0.00 0.00 147.00 76.53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 72.5308)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-72.5308 143,-72.5308 143,4 -4,4"/>
<!-- n1p1 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-43.0308 60.5,-68.0308 79.5,-68.0308 79.5,-43.0308 60.5,-43.0308"/>
<text text-anchor="start" x="65.5" y="-51.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-33.0308C41.0174,-33.0308 41.63,-50.7889 55.3152,-54.3961"/>
<polygon fill="#000000" stroke="#000000" points="55.3244,-56.1602 60.5,-55.0308 55.7497,-52.6861 55.3244,-56.1602"/>
<text text-anchor="middle" x="37.5217" y="-32.5448" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n4 -->
<!-- f -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="#000000" points="60.5,-.0308 60.5,-25.0308 79.5,-25.0308 79.5,-.0308 60.5,-.0308"/>
<text text-anchor="start" x="65.5" y="-8.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n4 -->
<!-- A -->
<g id="e2" class="edge">
<title>n1p1:e&#45;&gt;n4:w</title>
<path fill="none" stroke="#000000" d="M24,-33.0308C40.8147,-33.0308 41.7709,-16.0798 55.3644,-12.6366"/>
<polygon fill="#000000" stroke="#000000" points="55.7395,-14.3546 60.5,-12.0308 55.3294,-10.8787 55.7395,-14.3546"/>
<text text-anchor="middle" x="37.5188" y="-11.6037" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n2p1 -->
<!-- n2p2 -->
<!-- n2p1&#45;&gt;n2p2 -->
<!-- n3&#45;&gt;n2p1 -->
<!-- B -->
<g id="e3" class="edge">
<title>n3:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M79,-55.0308C93.3198,-55.0308 97.7714,-50.3546 109.7783,-49.2586"/>
<polygon fill="#000000" stroke="#000000" points="110.0811,-50.9972 115,-49.0308 109.9284,-47.5005 110.0811,-50.9972"/>
<text text-anchor="middle" x="92.3986" y="-40.8615" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n4&#45;&gt;n2p2 -->
<!-- B -->
<g id="e4" class="edge">
<title>n4:e&#45;&gt;n2p2:w</title>
<path fill="none" stroke="#000000" d="M79,-12.0308C93.3198,-12.0308 97.7714,-16.7069 109.7783,-17.8029"/>
<polygon fill="#000000" stroke="#000000" points="109.9284,-19.561 115,-18.0308 110.0811,-16.0643 109.9284,-19.561"/>
<text text-anchor="middle" x="92.3986" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
</g>
</svg>

<h2 id="Imperative-interface-1"><a class="docs-heading-anchor" href="#Imperative-interface-1">Imperative interface</a><a class="docs-heading-anchor-permalink" href="#Imperative-interface-1" title="Permalink"></a></h2><p>We now show how to manipulate wiring diagrams using the low-level, imperative interface. The diagrams will carry Julia symbols.</p><pre><code class="language-julia">f = Box(:f, [:A], [:B])
g = Box(:g, [:B], [:C])
h = Box(:h, [:C], [:D])

f</code></pre><pre><code class="language-none">Box(:f, [:A], [:B])</code></pre><h3 id="Composition-2"><a class="docs-heading-anchor" href="#Composition-2">Composition</a><a class="docs-heading-anchor-permalink" href="#Composition-2" title="Permalink"></a></h3><p>For example, here is how to manually construct a composition of two boxes.</p><p>The <code>add_box!</code> method adds a box to a wiring diagrams and returns the ID assigned to the box. How the boxes are indexed is an implementation detail that you should not rely on; use the IDs that the system gives you.</p><pre><code class="language-julia">d = WiringDiagram([:A], [:C])

fv = add_box!(d, f)
gv = add_box!(d, g)

add_wires!(d, [
  (input_id(d),1) =&gt; (fv,1),
  (fv,1) =&gt; (gv,1),
  (gv,1) =&gt; (output_id(d),1),
])

nboxes(d)</code></pre><pre><code class="language-none">2</code></pre><pre><code class="language-julia">nwires(d)</code></pre><pre><code class="language-none">3</code></pre><pre><code class="language-julia">d</code></pre><pre><code class="language-none">WiringDiagram([:A], [:C], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
  3 =&gt; Box(:f, [:A], [:B]),
  4 =&gt; Box(:g, [:B], [:C]) ],
[ Wire((1,1) =&gt; (3,1)),
  Wire((3,1) =&gt; (4,1)),
  Wire((4,1) =&gt; (2,1)) ])</code></pre><pre><code class="language-julia">show_diagram(d)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="202pt" height="37pt"
 viewBox="0.00 0.00 202.00 36.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 32.5)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-32.5 198,-32.5 198,4 -4,4"/>
<!-- n1p1 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-3 60.5,-28 79.5,-28 79.5,-3 60.5,-3"/>
<text text-anchor="start" x="65.5" y="-11.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-15C38.3212,-15 43.1602,-15 55.259,-15"/>
<polygon fill="#000000" stroke="#000000" points="55.5,-16.7501 60.5,-15 55.5,-13.2501 55.5,-16.7501"/>
<text text-anchor="middle" x="37.646" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n2p1 -->
<!-- n4 -->
<!-- g -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="#000000" points="115.5,-3 115.5,-28 134.5,-28 134.5,-3 115.5,-3"/>
<text text-anchor="start" x="120.5" y="-11.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">g</text>
</g>
<!-- n3&#45;&gt;n4 -->
<!-- B -->
<g id="e2" class="edge">
<title>n3:e&#45;&gt;n4:w</title>
<path fill="none" stroke="#000000" d="M79,-15C93.3212,-15 98.1602,-15 110.259,-15"/>
<polygon fill="#000000" stroke="#000000" points="110.5,-16.7501 115.5,-15 110.5,-13.2501 110.5,-16.7501"/>
<text text-anchor="middle" x="92.646" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n4&#45;&gt;n2p1 -->
<!-- C -->
<g id="e3" class="edge">
<title>n4:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M134,-15C148.125,-15 152.8977,-15 164.8308,-15"/>
<polygon fill="#000000" stroke="#000000" points="165,-16.7501 170,-15 165,-13.2501 165,-16.7501"/>
<text text-anchor="middle" x="147.3975" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">C</text>
</g>
</g>
</svg>

<h3 id="Products-1"><a class="docs-heading-anchor" href="#Products-1">Products</a><a class="docs-heading-anchor-permalink" href="#Products-1" title="Permalink"></a></h3><p>Here is how to manually construct a product of two boxes.</p><pre><code class="language-julia">d = WiringDiagram([:A,:C], [:B,:D])

fv = add_box!(d, f)
hv = add_box!(d, h)

add_wires!(d, [
  (input_id(d),1) =&gt; (fv,1),
  (input_id(d),2) =&gt; (hv,1),
  (fv,1) =&gt; (output_id(d),1),
  (hv,1) =&gt; (output_id(d),2),
])

d</code></pre><pre><code class="language-none">WiringDiagram([:A,:C], [:B,:D], 
[ 1 =&gt; {inputs},
  2 =&gt; {outputs},
  3 =&gt; Box(:f, [:A], [:B]),
  4 =&gt; Box(:h, [:C], [:D]) ],
[ Wire((1,1) =&gt; (3,1)),
  Wire((1,2) =&gt; (4,1)),
  Wire((3,1) =&gt; (2,1)),
  Wire((4,1) =&gt; (2,2)) ])</code></pre><pre><code class="language-julia">show_diagram(d)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="147pt" height="77pt"
 viewBox="0.00 0.00 147.00 76.53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 72.5308)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-72.5308 143,-72.5308 143,4 -4,4"/>
<!-- n1p1 -->
<!-- n1p2 -->
<!-- n1p1&#45;&gt;n1p2 -->
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="60.5,-43.0308 60.5,-68.0308 79.5,-68.0308 79.5,-43.0308 60.5,-43.0308"/>
<text text-anchor="start" x="65.5" y="-51.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">f</text>
</g>
<!-- n1p1&#45;&gt;n3 -->
<!-- A -->
<g id="e1" class="edge">
<title>n1p1:e&#45;&gt;n3:w</title>
<path fill="none" stroke="#000000" d="M24,-49.0308C38.5134,-49.0308 43.0355,-53.7069 55.2072,-54.8029"/>
<polygon fill="#000000" stroke="#000000" points="55.4293,-56.564 60.5,-55.0308 55.5799,-53.0672 55.4293,-56.564"/>
<text text-anchor="middle" x="37.6472" y="-40.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">A</text>
</g>
<!-- n4 -->
<!-- h -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="#000000" points="60.5,-.0308 60.5,-25.0308 79.5,-25.0308 79.5,-.0308 60.5,-.0308"/>
<text text-anchor="start" x="65.5" y="-8.8308" font-family="Courier,monospace" font-size="14.00" fill="#000000">h</text>
</g>
<!-- n1p2&#45;&gt;n4 -->
<!-- C -->
<g id="e2" class="edge">
<title>n1p2:e&#45;&gt;n4:w</title>
<path fill="none" stroke="#000000" d="M24,-18.0308C38.5134,-18.0308 43.0355,-13.3546 55.2072,-12.2586"/>
<polygon fill="#000000" stroke="#000000" points="55.5799,-13.9943 60.5,-12.0308 55.4293,-10.4975 55.5799,-13.9943"/>
<text text-anchor="middle" x="37.6472" y="-3.8615" font-family="Courier,monospace" font-size="14.00" fill="#000000">C</text>
</g>
<!-- n2p1 -->
<!-- n2p2 -->
<!-- n2p1&#45;&gt;n2p2 -->
<!-- n3&#45;&gt;n2p1 -->
<!-- B -->
<g id="e3" class="edge">
<title>n3:e&#45;&gt;n2p1:w</title>
<path fill="none" stroke="#000000" d="M79,-55.0308C93.3198,-55.0308 97.7714,-50.3546 109.7783,-49.2586"/>
<polygon fill="#000000" stroke="#000000" points="110.0811,-50.9972 115,-49.0308 109.9284,-47.5005 110.0811,-50.9972"/>
<text text-anchor="middle" x="92.3986" y="-40.8615" font-family="Courier,monospace" font-size="14.00" fill="#000000">B</text>
</g>
<!-- n4&#45;&gt;n2p2 -->
<!-- D -->
<g id="e4" class="edge">
<title>n4:e&#45;&gt;n2p2:w</title>
<path fill="none" stroke="#000000" d="M79,-12.0308C93.3198,-12.0308 97.7714,-16.7069 109.7783,-17.8029"/>
<polygon fill="#000000" stroke="#000000" points="109.9284,-19.561 115,-18.0308 110.0811,-16.0643 109.9284,-19.561"/>
<text text-anchor="middle" x="92.3986" y="-3.8" font-family="Courier,monospace" font-size="14.00" fill="#000000">D</text>
</g>
</g>
</svg>

</article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../../">« Catlab.jl</a><a class="docs-footer-nextpage" href="../diagrams_and_expressions/">Wiring diagrams and syntactic expressions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 16 February 2020 20:43">Sunday 16 February 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
