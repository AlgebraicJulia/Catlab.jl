<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Wiring Diagrams as Attributed C-Sets · Catlab.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><script src="../../../assets/analytics.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Catlab.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Catlab.jl</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Catlab.jl</a></li><li><span class="tocitem">Vignettes</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Seven Sketches</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../sketches/partitions/">Partitions</a></li><li><a class="tocitem" href="../../sketches/preorders/">Preorders</a></li><li><a class="tocitem" href="../../sketches/meets/">Meets in Preorders</a></li><li><a class="tocitem" href="../../sketches/smc/">Symmetric Monoidal Categories</a></li><li><a class="tocitem" href="../../sketches/cat_elements/">The Category of Elements</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Graphs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../graphs/graphs/">The Category of Graphs</a></li><li><a class="tocitem" href="../../graphs/graphs_label/">Labelled Graphs</a></li><li><a class="tocitem" href="../../graphs/subgraphs/">Algebra of subgraphs</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Diagrams</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../diagrams/diagrams/">Diagrams</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Wiring Diagrams</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../wiring_diagram_basics/">Basics of wiring diagrams</a></li><li><a class="tocitem" href="../diagrams_and_expressions/">Wiring diagrams and syntactic expressions</a></li><li class="is-active"><a class="tocitem" href>Wiring Diagrams as Attributed C-Sets</a><ul class="internal"><li><a class="tocitem" href="#Directed-Wiring-Diagrams"><span>Directed Wiring Diagrams</span></a></li><li><a class="tocitem" href="#Diagrams-as-C-Sets"><span>Diagrams as C-Sets</span></a></li><li><a class="tocitem" href="#Undirected-Wiring-Diagrams"><span>Undirected Wiring Diagrams</span></a></li><li><a class="tocitem" href="#Circular-Port-Graphs"><span>Circular Port Graphs</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Graphics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../graphics/composejl_wiring_diagrams/">Drawing wiring diagrams in Compose.jl</a></li><li><a class="tocitem" href="../../graphics/graphviz_wiring_diagrams/">Drawing wiring diagrams in Graphviz</a></li><li><a class="tocitem" href="../../graphics/tikz_wiring_diagrams/">Drawing wiring diagrams in TikZ</a></li><li><a class="tocitem" href="../../graphics/layouts_vs_drawings/">Layouts versus drawings of wiring diagrams</a></li><li><a class="tocitem" href="../../graphics/graphviz_schema_visualization/">Visualizing Acset Schemas with Graphviz</a></li></ul></li></ul></li><li><span class="tocitem">Modules</span><ul><li><a class="tocitem" href="../../../apis/core/">Theories, instances, and expressions</a></li><li><a class="tocitem" href="../../../apis/theories/">Standard library of theories</a></li><li><a class="tocitem" href="../../../apis/categorical_algebra/">Categorical algebra</a></li><li><a class="tocitem" href="../../../apis/graphs/">Graphs</a></li><li><a class="tocitem" href="../../../apis/wiring_diagrams/">Wiring diagrams</a></li><li><a class="tocitem" href="../../../apis/graphics/">Graphics</a></li><li><a class="tocitem" href="../../../apis/programs/">Programs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Vignettes</a></li><li><a class="is-disabled">Wiring Diagrams</a></li><li class="is-active"><a href>Wiring Diagrams as Attributed C-Sets</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Wiring Diagrams as Attributed C-Sets</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/AlgebraicJulia/Catlab.jl/blob/master/docs/literate/wiring_diagrams/wd_cset.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Wiring-Diagrams-as-Attributed-C-Sets"><a class="docs-heading-anchor" href="#Wiring-Diagrams-as-Attributed-C-Sets">Wiring Diagrams as Attributed C-Sets</a><a id="Wiring-Diagrams-as-Attributed-C-Sets-1"></a><a class="docs-heading-anchor-permalink" href="#Wiring-Diagrams-as-Attributed-C-Sets" title="Permalink"></a></h1><p>Catlab supports many different flavors of diagrammatic syntax. These support the different combinatorial data structures that we use for representing categorical constructions. We will discuss DirectedWiringDiagrams, UndirectedWiringDiagrams, and CPortGraphs in this document.</p><pre><code class="language-julia">using Catlab, Catlab.Theories
using Catlab.CategoricalAlgebra
using Catlab.WiringDiagrams
using Catlab.Graphics
using Catlab.Graphics.Graphviz
using Catlab.Programs
using Catlab.WiringDiagrams

draw(d::WiringDiagram) = to_graphviz(d,
  orientation=LeftToRight,
  labels=true, label_attr=:xlabel,
  node_attrs=Graphviz.Attributes(
    :fontname =&gt; &quot;Courier&quot;,
  ),
  edge_attrs=Graphviz.Attributes(
    :fontname =&gt; &quot;Courier&quot;,
  )
)

draw(uwd::AbstractUWD) = to_graphviz(uwd, junction_labels=:variable, box_labels=:name)</code></pre><pre class="documenter-example-output">draw (generic function with 2 methods)</pre><h2 id="Directed-Wiring-Diagrams"><a class="docs-heading-anchor" href="#Directed-Wiring-Diagrams">Directed Wiring Diagrams</a><a id="Directed-Wiring-Diagrams-1"></a><a class="docs-heading-anchor-permalink" href="#Directed-Wiring-Diagrams" title="Permalink"></a></h2><p>DWDs are used to represent the morphisms in a symmetric monoidal category. You can get started by presenting a <code>FreeSymmetricMonoidalCategory</code> with the <code>@present</code> macro.</p><pre><code class="language-julia">@present P(FreeSymmetricMonoidalCategory) begin
  (A,B,C,D)::Ob
  f::Hom(A,B)
  g::Hom(B,A)
  h::Hom(A⊗B, C)
  k::Hom(C,D⊗A)
end
generators(P)</code></pre><pre class="documenter-example-output">8-element Vector{Any}:
 A
 B
 C
 D
 f: A → B
 g: B → A
 h: A⊗B → C
 k: C → D⊗A</pre><p>These presentations are very syntactic objects and expose an API for manipulating expressions.</p><pre><code class="language-julia">for g in generators(P)
  &quot;$g is a $(gat_typeof(g)) with arguments $(gat_type_args(g))&quot;
end</code></pre><p>The <code>gat_typeof</code> function computes the algebraic type of a term by analogy to <code>Base.typeof</code> which computes the Julia type of a value.</p><pre><code class="language-julia">homs_P = filter(generators(P)) do g
  gat_typeof(g) == :Hom
end</code></pre><pre class="documenter-example-output">4-element Vector{Any}:
 f: A → B
 g: B → A
 h: A⊗B → C
 k: C → D⊗A</pre><p>When the term is a Hom, you can get the domain and codomain of the morphism with the <code>dom</code> and <code>codom</code> functions.</p><pre><code class="language-julia">map(homs_P) do f
  &quot;$f: $(dom(f)) → $(codom(f))&quot;
end</code></pre><pre class="documenter-example-output">4-element Vector{String}:
 &quot;f: A → B&quot;
 &quot;g: B → A&quot;
 &quot;h: otimes(A,B) → C&quot;
 &quot;k: C → otimes(D,A)&quot;</pre><p>With the presentation you can build up morphism expressions using a formula syntax.</p><pre><code class="language-julia">P[:h]⋅P[:k]</code></pre><p class="math-container">\[h \cdot k : A \otimes B \to D \otimes A\]</p><p>This syntactic API is useful for manipulating terms in an arbitrary GAT and is the formal language of Catlab for representing and manipulating algebraic structures. However, when we want to work with big expressions in an SMC, the tree structure inherent to formulas is too verbose, and we want to move to a port-graph structure called <code>DirectedWiringDiagrams</code>. This gives us the benefits of combinatorial data structures like graphs with the right expressional power for representing the morphisms in an SMC.</p><pre><code class="language-julia">wd = @program P (a::A, b::B) begin
  c = h(a,b)
  return k(c)
end

draw(wd)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="156pt" height="74pt"
 viewBox="0.00 0.00 156.00 74.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 70)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-70 152,-70 152,4 -4,4"/>
<!-- n0in1 -->
<!-- n0in2 -->
<!-- n0in1&#45;&gt;n0in2 -->
<!-- n1 -->
<!-- h -->
<g id="n1" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="37.5,-9 37.5,-57 56.5,-57 56.5,-9 37.5,-9"/>
<text text-anchor="start" x="42.5" y="-29.3" font-family="Courier,monospace" font-size="14.00">h</text>
</g>
<!-- n0in1&#45;&gt;n1 -->
<!-- A -->
<g id="e1" class="edge">
<title>n0in1:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-54C15.56,-54 19.62,-46.99 31.71,-45.34"/>
<polygon fill="black" stroke="black" points="32.12,-47.07 37,-45 31.9,-43.58 32.12,-47.07"/>
<text text-anchor="middle" x="14.4" y="-38.35" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n0in2&#45;&gt;n1 -->
<!-- B -->
<g id="e2" class="edge">
<title>n0in2:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-12C15.56,-12 19.62,-19.01 31.71,-20.66"/>
<polygon fill="black" stroke="black" points="31.9,-22.42 37,-21 32.12,-18.93 31.9,-22.42"/>
<text text-anchor="middle" x="14.4" y="-5.25" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n0out1 -->
<!-- n0out2 -->
<!-- n0out1&#45;&gt;n0out2 -->
<!-- n2 -->
<!-- k -->
<g id="n2" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="92.5,-9 92.5,-57 111.5,-57 111.5,-9 92.5,-9"/>
<text text-anchor="start" x="97.5" y="-29.3" font-family="Courier,monospace" font-size="14.00">k</text>
</g>
<!-- n1&#45;&gt;n2 -->
<!-- C -->
<g id="e3" class="edge">
<title>n1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M56,-33C70.12,-33 74.9,-33 86.83,-33"/>
<polygon fill="black" stroke="black" points="87,-34.75 92,-33 87,-31.25 87,-34.75"/>
<text text-anchor="middle" x="69.4" y="-21.8" font-family="Courier,monospace" font-size="14.00">C</text>
</g>
<!-- n2&#45;&gt;n0out1 -->
<!-- D -->
<g id="e4" class="edge">
<title>n2:e&#45;&gt;n0out1:w</title>
<path fill="none" stroke="black" d="M111,-45C125.56,-45 129.62,-52.01 141.71,-53.66"/>
<polygon fill="black" stroke="black" points="141.9,-55.42 147,-54 142.12,-51.93 141.9,-55.42"/>
<text text-anchor="middle" x="124.4" y="-38.25" font-family="Courier,monospace" font-size="14.00">D</text>
</g>
<!-- n2&#45;&gt;n0out2 -->
<!-- A -->
<g id="e5" class="edge">
<title>n2:e&#45;&gt;n0out2:w</title>
<path fill="none" stroke="black" d="M111,-21C125.56,-21 129.62,-13.99 141.71,-12.34"/>
<polygon fill="black" stroke="black" points="142.12,-14.07 147,-12 141.9,-10.58 142.12,-14.07"/>
<text text-anchor="middle" x="124.4" y="-5.35" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
</g>
</svg>
<p>Catlab gives you the tools for drawing wiring diagrams. Visualization of wiring diagrams is the oldest part of Catlab and the original motivation for its development. The <code>@program</code> macro allows you to define wiring diagrams using a syntax that feels like Julia code.</p><pre><code class="language-julia">wd = @program P (a::A, b::B) begin
  c = h(a,b)
  d,a₁ = k(c)
  return d, f(a₁)
end
draw(wd)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="211pt" height="77pt"
 viewBox="0.00 0.00 211.00 77.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 73)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-73 207,-73 207,4 -4,4"/>
<!-- n0in1 -->
<!-- n0in2 -->
<!-- n0in1&#45;&gt;n0in2 -->
<!-- n1 -->
<!-- h -->
<g id="n1" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="37.5,-12 37.5,-60 56.5,-60 56.5,-12 37.5,-12"/>
<text text-anchor="start" x="42.5" y="-32.3" font-family="Courier,monospace" font-size="14.00">h</text>
</g>
<!-- n0in1&#45;&gt;n1 -->
<!-- A -->
<g id="e1" class="edge">
<title>n0in1:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-57C15.56,-57 19.62,-49.99 31.71,-48.34"/>
<polygon fill="black" stroke="black" points="32.12,-50.07 37,-48 31.9,-46.58 32.12,-50.07"/>
<text text-anchor="middle" x="14.4" y="-41.35" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n0in2&#45;&gt;n1 -->
<!-- B -->
<g id="e2" class="edge">
<title>n0in2:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-15C15.56,-15 19.62,-22.01 31.71,-23.66"/>
<polygon fill="black" stroke="black" points="31.9,-25.42 37,-24 32.12,-21.93 31.9,-25.42"/>
<text text-anchor="middle" x="14.4" y="-8.25" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n0out1 -->
<!-- n0out2 -->
<!-- n0out1&#45;&gt;n0out2 -->
<!-- n2 -->
<!-- k -->
<g id="n2" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="92.5,-12 92.5,-60 111.5,-60 111.5,-12 92.5,-12"/>
<text text-anchor="start" x="97.5" y="-32.3" font-family="Courier,monospace" font-size="14.00">k</text>
</g>
<!-- n1&#45;&gt;n2 -->
<!-- C -->
<g id="e3" class="edge">
<title>n1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M56,-36C70.12,-36 74.9,-36 86.83,-36"/>
<polygon fill="black" stroke="black" points="87,-37.75 92,-36 87,-34.25 87,-37.75"/>
<text text-anchor="middle" x="69.4" y="-24.8" font-family="Courier,monospace" font-size="14.00">C</text>
</g>
<!-- n2&#45;&gt;n0out1 -->
<!-- D -->
<g id="e5" class="edge">
<title>n2:e&#45;&gt;n0out1:w</title>
<path fill="none" stroke="black" d="M111,-48C149.9,-48 160.47,-56.24 196.93,-56.95"/>
<polygon fill="black" stroke="black" points="196.98,-58.7 202,-57 197.02,-55.2 196.98,-58.7"/>
<text text-anchor="middle" x="152.07" y="-41.31" font-family="Courier,monospace" font-size="14.00">D</text>
</g>
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="black" points="147.5,-3 147.5,-28 166.5,-28 166.5,-3 147.5,-3"/>
<text text-anchor="start" x="152.5" y="-11.8" font-family="Courier,monospace" font-size="14.00">f</text>
</g>
<!-- n2&#45;&gt;n3 -->
<!-- A -->
<g id="e4" class="edge">
<title>n2:e&#45;&gt;n3:w</title>
<path fill="none" stroke="black" d="M111,-24C125.56,-24 129.62,-16.99 141.71,-15.34"/>
<polygon fill="black" stroke="black" points="142.12,-17.07 147,-15 141.9,-13.58 142.12,-17.07"/>
<text text-anchor="middle" x="124.4" y="-8.35" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n3&#45;&gt;n0out2 -->
<!-- B -->
<g id="e6" class="edge">
<title>n3:e&#45;&gt;n0out2:w</title>
<path fill="none" stroke="black" d="M166,-15C180.12,-15 184.9,-15 196.83,-15"/>
<polygon fill="black" stroke="black" points="197,-16.75 202,-15 197,-13.25 197,-16.75"/>
<text text-anchor="middle" x="179.4" y="-3.8" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
</g>
</svg>
<p>The input wires are declared as <em>arguments</em> to the program, and the output wires are declared as <em>returns</em> from the function. Variables that are not consumed or by another function or returned by the program are automatically dropped.</p><pre><code class="language-julia">wd = @program P (a::A, b::B) begin
  c = h(a,b)
  d,a₁ = k(c)
  return f(a₁)
end
draw(wd)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="211pt" height="74pt"
 viewBox="0.00 0.00 211.00 74.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 70)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-70 207,-70 207,4 -4,4"/>
<!-- n0in1 -->
<!-- n0in2 -->
<!-- n0in1&#45;&gt;n0in2 -->
<!-- n1 -->
<!-- h -->
<g id="n1" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="37.5,-9 37.5,-57 56.5,-57 56.5,-9 37.5,-9"/>
<text text-anchor="start" x="42.5" y="-29.3" font-family="Courier,monospace" font-size="14.00">h</text>
</g>
<!-- n0in1&#45;&gt;n1 -->
<!-- A -->
<g id="e1" class="edge">
<title>n0in1:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-54C15.56,-54 19.62,-46.99 31.71,-45.34"/>
<polygon fill="black" stroke="black" points="32.12,-47.07 37,-45 31.9,-43.58 32.12,-47.07"/>
<text text-anchor="middle" x="14.4" y="-38.35" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n0in2&#45;&gt;n1 -->
<!-- B -->
<g id="e2" class="edge">
<title>n0in2:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-12C15.56,-12 19.62,-19.01 31.71,-20.66"/>
<polygon fill="black" stroke="black" points="31.9,-22.42 37,-21 32.12,-18.93 31.9,-22.42"/>
<text text-anchor="middle" x="14.4" y="-5.25" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n0out1 -->
<!-- n2 -->
<!-- k -->
<g id="n2" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="92.5,-9 92.5,-57 111.5,-57 111.5,-9 92.5,-9"/>
<text text-anchor="start" x="97.5" y="-29.3" font-family="Courier,monospace" font-size="14.00">k</text>
</g>
<!-- n1&#45;&gt;n2 -->
<!-- C -->
<g id="e3" class="edge">
<title>n1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M56,-33C70.12,-33 74.9,-33 86.83,-33"/>
<polygon fill="black" stroke="black" points="87,-34.75 92,-33 87,-31.25 87,-34.75"/>
<text text-anchor="middle" x="69.4" y="-21.8" font-family="Courier,monospace" font-size="14.00">C</text>
</g>
<!-- n3 -->
<!-- f -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="black" points="147.5,-9 147.5,-34 166.5,-34 166.5,-9 147.5,-9"/>
<text text-anchor="start" x="152.5" y="-17.8" font-family="Courier,monospace" font-size="14.00">f</text>
</g>
<!-- n2&#45;&gt;n3 -->
<!-- A -->
<g id="e4" class="edge">
<title>n2:e&#45;&gt;n3:w</title>
<path fill="none" stroke="black" d="M111,-21C125.12,-21 129.9,-21 141.83,-21"/>
<polygon fill="black" stroke="black" points="142,-22.75 147,-21 142,-19.25 142,-22.75"/>
<text text-anchor="middle" x="124.4" y="-9.8" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n3&#45;&gt;n0out1 -->
<!-- B -->
<g id="e5" class="edge">
<title>n3:e&#45;&gt;n0out1:w</title>
<path fill="none" stroke="black" d="M166,-21C180.12,-21 184.9,-21 196.83,-21"/>
<polygon fill="black" stroke="black" points="197,-22.75 202,-21 197,-19.25 197,-22.75"/>
<text text-anchor="middle" x="179.4" y="-9.8" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
</g>
</svg>
<p>You can copy a value by using it more than once. This is visualized as a wire being split into two wires.</p><pre><code class="language-julia">wd = @program P (b::B) begin
  h(g(b),b)
end
draw(wd)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="156pt" height="66pt"
 viewBox="0.00 0.00 156.00 65.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 61.5)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-61.5 152,-61.5 152,4 -4,4"/>
<!-- n0in1 -->
<!-- n1 -->
<!-- g -->
<g id="n1" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="37.5,-32 37.5,-57 56.5,-57 56.5,-32 37.5,-32"/>
<text text-anchor="start" x="42.5" y="-40.8" font-family="Courier,monospace" font-size="14.00">g</text>
</g>
<!-- n0in1&#45;&gt;n1 -->
<!-- B -->
<g id="e1" class="edge">
<title>n0in1:e&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M1,-24C17.44,-24 18.62,-40.14 31.97,-43.42"/>
<polygon fill="black" stroke="black" points="31.83,-45.17 37,-44 32.23,-41.69 31.83,-45.17"/>
<text text-anchor="middle" x="14.27" y="-22.54" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n2 -->
<!-- h -->
<g id="n2" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="92.5,0 92.5,-48 111.5,-48 111.5,0 92.5,0"/>
<text text-anchor="start" x="97.5" y="-20.3" font-family="Courier,monospace" font-size="14.00">h</text>
</g>
<!-- n0in1&#45;&gt;n2 -->
<!-- B -->
<g id="e2" class="edge">
<title>n0in1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M1,-24C40.04,-24 50.34,-13.01 86.91,-12.06"/>
<polygon fill="black" stroke="black" points="87.02,-13.81 92,-12 86.98,-10.31 87.02,-13.81"/>
<text text-anchor="middle" x="42.07" y="-6.78" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n0out1 -->
<!-- n1&#45;&gt;n2 -->
<!-- A -->
<g id="e3" class="edge">
<title>n1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M56,-44C70.47,-44 74.67,-37.77 86.74,-36.3"/>
<polygon fill="black" stroke="black" points="87.11,-38.04 92,-36 86.91,-34.54 87.11,-38.04"/>
<text text-anchor="middle" x="69.4" y="-28.84" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n2&#45;&gt;n0out1 -->
<!-- C -->
<g id="e4" class="edge">
<title>n2:e&#45;&gt;n0out1:w</title>
<path fill="none" stroke="black" d="M111,-24C125.12,-24 129.9,-24 141.83,-24"/>
<polygon fill="black" stroke="black" points="142,-25.75 147,-24 142,-22.25 142,-25.75"/>
<text text-anchor="middle" x="124.4" y="-12.8" font-family="Courier,monospace" font-size="14.00">C</text>
</g>
</g>
</svg>
<p>You can visualize the copy and delete morphisms explicitly with the <code>add_junctions</code> function. The dots with one wire input and multiple outputs are copying values and dots with no wires out are deletions (discarding values). Not all instances of a <code>SymmetricMonoidalCategory</code> support copy and delete, for example, in manufacturing you can&#39;t duplicate a resource, and in chemistry you can&#39;t discard species. Catlab would enforce that when you tried to interpret the wiring diagram in a specific SMC.</p><pre><code class="language-julia">wd = @program P (b::B) begin
  c = h(g(b),b)
  d, a₁ = k(c)
  return f(a₁)
end
draw(add_junctions(wd))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="306pt" height="74pt"
 viewBox="0.00 0.00 306.00 73.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 69.5)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-69.5 302,-69.5 302,4 -4,4"/>
<!-- n0in1 -->
<!-- n5 -->
<!-- junction -->
<g id="n5" class="node">
<title>n5</title>
<ellipse fill="black" stroke="black" cx="39" cy="-32" rx="2" ry="2"/>
</g>
<!-- n0in1&#45;&gt;n5 -->
<!-- B -->
<g id="e1" class="edge">
<title>n0in1:e&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M1,-32C11.82,-32 24.42,-32 31.77,-32"/>
<polygon fill="black" stroke="black" points="31.85,-33.75 36.85,-32 31.85,-30.25 31.85,-33.75"/>
<text text-anchor="middle" x="14.2" y="-20.8" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n0out1 -->
<!-- n1 -->
<!-- g -->
<g id="n1" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="77.5,-40 77.5,-65 96.5,-65 96.5,-40 77.5,-40"/>
<text text-anchor="start" x="82.5" y="-48.8" font-family="Courier,monospace" font-size="14.00">g</text>
</g>
<!-- n2 -->
<!-- h -->
<g id="n2" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="132.5,-8 132.5,-56 151.5,-56 151.5,-8 132.5,-8"/>
<text text-anchor="start" x="137.5" y="-28.3" font-family="Courier,monospace" font-size="14.00">h</text>
</g>
<!-- n1&#45;&gt;n2 -->
<!-- A -->
<g id="e3" class="edge">
<title>n1:e&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M96,-52C110.47,-52 114.67,-45.77 126.74,-44.3"/>
<polygon fill="black" stroke="black" points="127.11,-46.04 132,-44 126.91,-42.54 127.11,-46.04"/>
<text text-anchor="middle" x="109.4" y="-36.84" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n3 -->
<!-- k -->
<g id="n3" class="node">
<title>n3</title>
<polygon fill="none" stroke="black" points="187.5,-8 187.5,-56 206.5,-56 206.5,-8 187.5,-8"/>
<text text-anchor="start" x="192.5" y="-28.3" font-family="Courier,monospace" font-size="14.00">k</text>
</g>
<!-- n2&#45;&gt;n3 -->
<!-- C -->
<g id="e4" class="edge">
<title>n2:e&#45;&gt;n3:w</title>
<path fill="none" stroke="black" d="M151,-32C165.12,-32 169.9,-32 181.83,-32"/>
<polygon fill="black" stroke="black" points="182,-33.75 187,-32 182,-30.25 182,-33.75"/>
<text text-anchor="middle" x="164.4" y="-20.8" font-family="Courier,monospace" font-size="14.00">C</text>
</g>
<!-- n4 -->
<!-- f -->
<g id="n4" class="node">
<title>n4</title>
<polygon fill="none" stroke="black" points="242.5,-3 242.5,-28 261.5,-28 261.5,-3 242.5,-3"/>
<text text-anchor="start" x="247.5" y="-11.8" font-family="Courier,monospace" font-size="14.00">f</text>
</g>
<!-- n3&#45;&gt;n4 -->
<!-- A -->
<g id="e2" class="edge">
<title>n3:e&#45;&gt;n4:w</title>
<path fill="none" stroke="black" d="M206,-20C220.26,-20 224.81,-16.1 236.79,-15.19"/>
<polygon fill="black" stroke="black" points="237.07,-16.93 242,-15 236.94,-13.43 237.07,-16.93"/>
<text text-anchor="middle" x="219.4" y="-6.33" font-family="Courier,monospace" font-size="14.00">A</text>
</g>
<!-- n6 -->
<!-- junction -->
<g id="n6" class="node">
<title>n6</title>
<ellipse fill="black" stroke="black" cx="251.5" cy="-49" rx="2" ry="2"/>
</g>
<!-- n3&#45;&gt;n6 -->
<!-- D -->
<g id="e7" class="edge">
<title>n3:e&#45;&gt;n6</title>
<path fill="none" stroke="black" d="M206,-44C219.74,-44 235.72,-46.38 244.3,-47.86"/>
<polygon fill="black" stroke="black" points="244.17,-49.61 249.4,-48.79 244.8,-46.17 244.17,-49.61"/>
<text text-anchor="middle" x="223.22" y="-34.25" font-family="Courier,monospace" font-size="14.00">D</text>
</g>
<!-- n4&#45;&gt;n0out1 -->
<!-- B -->
<g id="e8" class="edge">
<title>n4:e&#45;&gt;n0out1:w</title>
<path fill="none" stroke="black" d="M261,-15C275.12,-15 279.9,-15 291.83,-15"/>
<polygon fill="black" stroke="black" points="292,-16.75 297,-15 292,-13.25 292,-16.75"/>
<text text-anchor="middle" x="274.4" y="-3.8" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n5&#45;&gt;n1 -->
<!-- B -->
<g id="e5" class="edge">
<title>n5&#45;&gt;n1:w</title>
<path fill="none" stroke="black" d="M40.82,-32.86C44.17,-36.27 57.28,-48.79 71.66,-51.49"/>
<polygon fill="black" stroke="black" points="71.86,-53.26 77,-52 72.19,-49.78 71.86,-53.26"/>
<text text-anchor="middle" x="52.54" y="-34.45" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
<!-- n5&#45;&gt;n2 -->
<!-- B -->
<g id="e6" class="edge">
<title>n5&#45;&gt;n2:w</title>
<path fill="none" stroke="black" d="M41.29,-31.7C49.05,-29.94 90.47,-20.91 126.7,-20.06"/>
<polygon fill="black" stroke="black" points="127.02,-21.81 132,-20 126.98,-18.31 127.02,-21.81"/>
<text text-anchor="middle" x="82.12" y="-12.34" font-family="Courier,monospace" font-size="14.00">B</text>
</g>
</g>
</svg>
<p>For more details about working with wiring diagrams in Catlab, you should look at the other vignettes in this section which explain how wiring diagrams interact with SMC expressions and the basics of constructing and manipulation wiring diagrams.</p><h2 id="Diagrams-as-C-Sets"><a class="docs-heading-anchor" href="#Diagrams-as-C-Sets">Diagrams as C-Sets</a><a id="Diagrams-as-C-Sets-1"></a><a class="docs-heading-anchor-permalink" href="#Diagrams-as-C-Sets" title="Permalink"></a></h2><p>The underlying data of a wiring diagram is combinatorial. That means we can represent it as a C-Set</p><pre><code class="language-julia">wd.diagram</code></pre><div class="c-set">
<span class="c-set-summary">Catlab.WiringDiagrams.DirectedWiringDiagrams.WiringDiagramACSet{Any, Any, Any, DataType} with elements Box = 1:4, InPort = 1:5, OutPort = 1:5, OuterInPort = 1:1, OuterOutPort = 1:1, Wire = 1:3, InWire = 1:2, OutWire = 1:1, PassWire = 1:0</span>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Box</th>
      <th style = "text-align: right;">value</th>
      <th style = "text-align: right;">box_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">g</td>
      <td style = "text-align: right;">Box{Symbol}</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">h</td>
      <td style = "text-align: right;">Box{Symbol}</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">k</td>
      <td style = "text-align: right;">Box{Symbol}</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">f</td>
      <td style = "text-align: right;">Box{Symbol}</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">InPort</th>
      <th style = "text-align: right;">in_port_box</th>
      <th style = "text-align: right;">in_port_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">B</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">A</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">B</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">C</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">4</td>
      <td style = "text-align: right;">A</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OutPort</th>
      <th style = "text-align: right;">out_port_box</th>
      <th style = "text-align: right;">out_port_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">A</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">C</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">D</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">A</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">4</td>
      <td style = "text-align: right;">B</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OuterInPort</th>
      <th style = "text-align: right;">outer_in_port_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">B</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OuterOutPort</th>
      <th style = "text-align: right;">outer_out_port_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">B</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Wire</th>
      <th style = "text-align: right;">src</th>
      <th style = "text-align: right;">tgt</th>
      <th style = "text-align: right;">wire_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">4</td>
      <td style = "text-align: right;">5</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">4</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">InWire</th>
      <th style = "text-align: right;">in_src</th>
      <th style = "text-align: right;">in_tgt</th>
      <th style = "text-align: right;">in_wire_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OutWire</th>
      <th style = "text-align: right;">out_src</th>
      <th style = "text-align: right;">out_tgt</th>
      <th style = "text-align: right;">out_wire_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">5</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">nothing</td>
    </tr>
  </tbody>
</table>
</div>
<p>Ok, there is a lot in there. The columns with integer entries are the combinatorial data encoding the connectivity of the wiring diagram. The columns with Symbols in them are encoding the labels for the diagram, the <code>value</code> of a box is the content of the box. Ports have types and wires have values. When we define the wiring diagram with the <code>@program</code> macro, we get a diagram that has labels and types, but no values. These values are initialized to nothing, but could be filled with values to be carried down the wires in an application.</p><p>The schema of for wiring diagrams is called TheoryAttributedWiringDiagrams and is a little overwhelming, so we can explore how to build it up with C-Set schema inheritance.</p><pre><code class="language-julia">to_graphviz(WiringDiagrams.DirectedWiringDiagrams.TheoryAttributedWiringDiagram)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="494pt" height="534pt"
 viewBox="0.00 0.00 494.38 533.76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 529.76)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-529.76 490.38,-529.76 490.38,4 -4,4"/>
<!-- n1 -->
<g id="node1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="174.5" cy="-401.06" rx="18" ry="18"/>
<text text-anchor="middle" x="174.5" y="-397.36" font-family="Times,serif" font-size="14.00">Box</text>
</g>
<!-- n12 -->
<g id="node12" class="node">
<title>n12</title>
<ellipse fill="black" stroke="black" cx="68.8" cy="-460.89" rx="1.8" ry="1.8"/>
<text text-anchor="middle" x="33.5" y="-466.49" font-family="Times,serif" font-size="14.00">BoxValue</text>
</g>
<!-- n1&#45;&gt;n12 -->
<g id="edge15" class="edge">
<title>n1&#45;&gt;n12</title>
<path fill="none" stroke="black" d="M158.45,-410.15C136.55,-422.54 97.92,-444.4 79.35,-454.91"/>
<polygon fill="black" stroke="black" points="77.54,-451.92 70.56,-459.89 80.99,-458.01 77.54,-451.92"/>
<text text-anchor="middle" x="99.4" y="-436.33" font-family="Times,serif" font-size="14.00">value</text>
</g>
<!-- n13 -->
<g id="node13" class="node">
<title>n13</title>
<ellipse fill="black" stroke="black" cx="229.57" cy="-508.96" rx="1.8" ry="1.8"/>
<text text-anchor="middle" x="196.77" y="-514.56" font-family="Times,serif" font-size="14.00">BoxType</text>
</g>
<!-- n1&#45;&gt;n13 -->
<g id="edge16" class="edge">
<title>n1&#45;&gt;n13</title>
<path fill="none" stroke="black" d="M182.86,-417.45C194.27,-439.8 214.4,-479.23 224.07,-498.19"/>
<polygon fill="black" stroke="black" points="220.99,-499.85 228.65,-507.16 227.22,-496.66 220.99,-499.85"/>
<text text-anchor="middle" x="171.47" y="-461.62" font-family="Times,serif" font-size="14.00">box_type</text>
</g>
<!-- n2 -->
<g id="node2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="172.6" cy="-284.51" rx="24.5" ry="24.5"/>
<text text-anchor="middle" x="172.6" y="-280.81" font-family="Times,serif" font-size="14.00">InPort</text>
</g>
<!-- n2&#45;&gt;n1 -->
<g id="edge9" class="edge">
<title>n2&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M173,-309.51C173.31,-328.14 173.72,-353.58 174.04,-372.92"/>
<polygon fill="black" stroke="black" points="170.54,-373.01 174.2,-382.95 177.54,-372.89 170.54,-373.01"/>
<text text-anchor="middle" x="132.02" y="-345.01" font-family="Times,serif" font-size="14.00">in_port_box</text>
</g>
<!-- n10 -->
<g id="node10" class="node">
<title>n10</title>
<ellipse fill="black" stroke="black" cx="317.48" cy="-247.94" rx="1.8" ry="1.8"/>
<text text-anchor="middle" x="350.68" y="-234.94" font-family="Times,serif" font-size="14.00">PortValue</text>
</g>
<!-- n2&#45;&gt;n10 -->
<g id="edge11" class="edge">
<title>n2&#45;&gt;n10</title>
<path fill="none" stroke="black" d="M196.85,-278.39C228.24,-270.47 281.73,-256.97 305.49,-250.97"/>
<polygon fill="black" stroke="black" points="306.65,-254.29 315.49,-248.45 304.94,-247.5 306.65,-254.29"/>
<text text-anchor="middle" x="295.67" y="-253.48" font-family="Times,serif" font-size="14.00">in_port_type</text>
</g>
<!-- n3 -->
<g id="node3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="244.6" cy="-308.28" rx="31.2" ry="31.2"/>
<text text-anchor="middle" x="244.6" y="-304.58" font-family="Times,serif" font-size="14.00">OutPort</text>
</g>
<!-- n3&#45;&gt;n1 -->
<g id="edge10" class="edge">
<title>n3&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M225.44,-333.63C214.94,-347.54 202.01,-364.65 191.81,-378.15"/>
<polygon fill="black" stroke="black" points="188.78,-376.35 185.55,-386.44 194.37,-380.57 188.78,-376.35"/>
<text text-anchor="middle" x="255.12" y="-359.69" font-family="Times,serif" font-size="14.00">out_port_box</text>
</g>
<!-- n3&#45;&gt;n10 -->
<g id="edge12" class="edge">
<title>n3&#45;&gt;n10</title>
<path fill="none" stroke="black" d="M268.87,-288.19C282.25,-277.11 298.1,-263.99 307.98,-255.81"/>
<polygon fill="black" stroke="black" points="310.48,-258.29 315.95,-249.21 306.02,-252.89 310.48,-258.29"/>
<text text-anchor="middle" x="337.92" y="-275.8" font-family="Times,serif" font-size="14.00">out_port_type</text>
</g>
<!-- n4 -->
<g id="node4" class="node">
<title>n4</title>
<ellipse fill="none" stroke="black" cx="262.12" cy="-117.91" rx="47.1" ry="47.1"/>
<text text-anchor="middle" x="262.12" y="-114.21" font-family="Times,serif" font-size="14.00">OuterInPort</text>
</g>
<!-- n4&#45;&gt;n10 -->
<g id="edge13" class="edge">
<title>n4&#45;&gt;n10</title>
<path fill="none" stroke="black" d="M280.71,-161.57C292.01,-188.12 305.59,-220.01 312.66,-236.62"/>
<polygon fill="black" stroke="black" points="309.64,-238.45 316.77,-246.28 316.08,-235.71 309.64,-238.45"/>
<text text-anchor="middle" x="229.69" y="-202.9" font-family="Times,serif" font-size="14.00">outer_in_port_type</text>
</g>
<!-- n5 -->
<g id="node5" class="node">
<title>n5</title>
<ellipse fill="none" stroke="black" cx="392.73" cy="-149.16" rx="53.8" ry="53.8"/>
<text text-anchor="middle" x="392.73" y="-145.46" font-family="Times,serif" font-size="14.00">OuterOutPort</text>
</g>
<!-- n5&#45;&gt;n10 -->
<g id="edge14" class="edge">
<title>n5&#45;&gt;n10</title>
<path fill="none" stroke="black" d="M359.94,-192.2C346.87,-209.36 333.01,-227.56 324.81,-238.32"/>
<polygon fill="black" stroke="black" points="322.01,-236.23 318.73,-246.3 327.58,-240.47 322.01,-236.23"/>
<text text-anchor="middle" x="414.38" y="-219.06" font-family="Times,serif" font-size="14.00">outer_out_port_type</text>
</g>
<!-- n6 -->
<g id="node6" class="node">
<title>n6</title>
<ellipse fill="none" stroke="black" cx="133.42" cy="-213.84" rx="18.9" ry="18.9"/>
<text text-anchor="middle" x="133.42" y="-210.14" font-family="Times,serif" font-size="14.00">Wire</text>
</g>
<!-- n6&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n6&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M142.5,-230.23C146.41,-237.28 151.11,-245.76 155.63,-253.9"/>
<polygon fill="black" stroke="black" points="152.68,-255.8 160.59,-262.85 158.8,-252.41 152.68,-255.8"/>
<text text-anchor="middle" x="138.06" y="-245.86" font-family="Times,serif" font-size="14.00">tgt</text>
</g>
<!-- n6&#45;&gt;n3 -->
<g id="edge1" class="edge">
<title>n6&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M147.95,-226.19C164.24,-240.02 191.14,-262.87 212.43,-280.96"/>
<polygon fill="black" stroke="black" points="210.4,-283.82 220.28,-287.62 214.93,-278.48 210.4,-283.82"/>
<text text-anchor="middle" x="169.19" y="-242.37" font-family="Times,serif" font-size="14.00">src</text>
</g>
<!-- n11 -->
<g id="node11" class="node">
<title>n11</title>
<ellipse fill="black" stroke="black" cx="195.51" cy="-86.89" rx="1.8" ry="1.8"/>
<text text-anchor="middle" x="157.21" y="-73.89" font-family="Times,serif" font-size="14.00">WireValue</text>
</g>
<!-- n6&#45;&gt;n11 -->
<g id="edge17" class="edge">
<title>n6&#45;&gt;n11</title>
<path fill="none" stroke="black" d="M141.66,-196.98C154.58,-170.58 179.22,-120.19 190.11,-97.93"/>
<polygon fill="black" stroke="black" points="193.33,-99.31 194.58,-88.79 187.04,-96.24 193.33,-99.31"/>
<text text-anchor="middle" x="185.14" y="-136.26" font-family="Times,serif" font-size="14.00">wire_value</text>
</g>
<!-- n7 -->
<g id="node7" class="node">
<title>n7</title>
<ellipse fill="none" stroke="black" cx="128.47" cy="-148.81" rx="26.9" ry="26.9"/>
<text text-anchor="middle" x="128.47" y="-145.11" font-family="Times,serif" font-size="14.00">InWire</text>
</g>
<!-- n7&#45;&gt;n2 -->
<g id="edge4" class="edge">
<title>n7&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M136.88,-174.65C143.92,-196.32 154.03,-227.41 161.7,-250.98"/>
<polygon fill="black" stroke="black" points="158.4,-252.15 164.82,-260.58 165.05,-249.99 158.4,-252.15"/>
<text text-anchor="middle" x="170.29" y="-216.62" font-family="Times,serif" font-size="14.00">in_tgt</text>
</g>
<!-- n7&#45;&gt;n4 -->
<g id="edge3" class="edge">
<title>n7&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M154.88,-142.7C169.58,-139.31 188.46,-134.94 206.27,-130.82"/>
<polygon fill="black" stroke="black" points="207.06,-134.23 216.02,-128.57 205.49,-127.41 207.06,-134.23"/>
<text text-anchor="middle" x="191.32" y="-125.56" font-family="Times,serif" font-size="14.00">in_src</text>
</g>
<!-- n7&#45;&gt;n11 -->
<g id="edge18" class="edge">
<title>n7&#45;&gt;n11</title>
<path fill="none" stroke="black" d="M148.59,-130.23C161.18,-118.6 176.8,-104.18 186.46,-95.25"/>
<polygon fill="black" stroke="black" points="189.02,-97.65 193.99,-88.29 184.27,-92.51 189.02,-97.65"/>
<text text-anchor="middle" x="119.02" y="-101.54" font-family="Times,serif" font-size="14.00">in_wire_value</text>
</g>
<!-- n8 -->
<g id="node8" class="node">
<title>n8</title>
<ellipse fill="none" stroke="black" cx="291.45" cy="-187.84" rx="33.6" ry="33.6"/>
<text text-anchor="middle" x="291.45" y="-184.14" font-family="Times,serif" font-size="14.00">OutWire</text>
</g>
<!-- n8&#45;&gt;n3 -->
<g id="edge5" class="edge">
<title>n8&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M279.26,-219.17C273.34,-234.41 266.15,-252.88 259.86,-269.04"/>
<polygon fill="black" stroke="black" points="256.44,-268.17 256.08,-278.76 262.97,-270.71 256.44,-268.17"/>
<text text-anchor="middle" x="243.56" y="-232.91" font-family="Times,serif" font-size="14.00">out_src</text>
</g>
<!-- n8&#45;&gt;n5 -->
<g id="edge6" class="edge">
<title>n8&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M322.94,-175.81C326.11,-174.6 329.41,-173.35 332.75,-172.07"/>
<polygon fill="black" stroke="black" points="334.19,-175.26 342.29,-168.43 331.7,-168.72 334.19,-175.26"/>
<text text-anchor="middle" x="353.85" y="-177.74" font-family="Times,serif" font-size="14.00">out_tgt</text>
</g>
<!-- n8&#45;&gt;n11 -->
<g id="edge19" class="edge">
<title>n8&#45;&gt;n11</title>
<path fill="none" stroke="black" d="M268.23,-163.41C247.48,-141.58 218.23,-110.81 203.98,-95.81"/>
<polygon fill="black" stroke="black" points="206.45,-93.32 197.02,-88.48 201.37,-98.14 206.45,-93.32"/>
<text text-anchor="middle" x="182.6" y="-118.41" font-family="Times,serif" font-size="14.00">out_wire_value</text>
</g>
<!-- n9 -->
<g id="node9" class="node">
<title>n9</title>
<ellipse fill="none" stroke="black" cx="317.25" cy="-36.85" rx="36.7" ry="36.7"/>
<text text-anchor="middle" x="317.25" y="-33.15" font-family="Times,serif" font-size="14.00">PassWire</text>
</g>
<!-- n9&#45;&gt;n4 -->
<g id="edge7" class="edge">
<title>n9&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M296.41,-67.5C295.78,-68.42 295.15,-69.34 294.52,-70.27"/>
<polygon fill="black" stroke="black" points="291.49,-68.5 288.76,-78.74 297.28,-72.44 291.49,-68.5"/>
<text text-anchor="middle" x="264.96" y="-57.68" font-family="Times,serif" font-size="14.00">pass_src</text>
</g>
<!-- n9&#45;&gt;n5 -->
<g id="edge8" class="edge">
<title>n9&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M337.87,-67.54C343.75,-76.28 350.32,-86.06 356.82,-95.74"/>
<polygon fill="black" stroke="black" points="354.02,-97.84 362.5,-104.19 359.83,-93.93 354.02,-97.84"/>
<text text-anchor="middle" x="377.85" y="-70.44" font-family="Times,serif" font-size="14.00">pass_tgt</text>
</g>
<!-- n9&#45;&gt;n11 -->
<g id="edge20" class="edge">
<title>n9&#45;&gt;n11</title>
<path fill="none" stroke="black" d="M283.01,-50.92C257.33,-61.48 223.77,-75.28 206.63,-82.32"/>
<polygon fill="black" stroke="black" points="205.19,-79.13 197.27,-86.17 207.85,-85.61 205.19,-79.13"/>
<text text-anchor="middle" x="186.82" y="-55.42" font-family="Times,serif" font-size="14.00">pass_wire_value</text>
</g>
</g>
</svg>
<p>From the file Catlab/src/WiringDiagrams/Directed.jl</p><pre><code class="language-julia">@present TheoryWiringDiagram(FreeSchema) begin
  Box::Ob
  (InPort, OutPort, OuterInPort, OuterOutPort)::Ob
  (Wire, InWire, OutWire, PassWire)::Ob

  src::Hom(Wire, OutPort)
  tgt::Hom(Wire, InPort)
  in_src::Hom(InWire, OuterInPort)
  in_tgt::Hom(InWire, InPort)
  out_src::Hom(OutWire, OutPort)
  out_tgt::Hom(OutWire, OuterOutPort)
  pass_src::Hom(PassWire, OuterInPort)
  pass_tgt::Hom(PassWire, OuterOutPort)

  in_port_box::Hom(InPort, Box)
  out_port_box::Hom(OutPort, Box)
end

@abstract_acset_type AbstractWiringDiagram &lt;: AbstractGraph

@present TheoryTypedWiringDiagram &lt;: TheoryWiringDiagram begin
  PortValue::AttrType
  in_port_type::Attr(InPort, PortValue)
  out_port_type::Attr(OutPort, PortValue)
  outer_in_port_type::Attr(OuterInPort, PortValue)
  outer_out_port_type::Attr(OuterOutPort, PortValue)
end

@present TheoryAttributedWiringDiagram &lt;: TheoryTypedWiringDiagram begin
  WireValue::AttrType
  BoxValue::AttrType
  BoxType::AttrType

  value::Attr(Box, BoxValue)
  box_type::Attr(Box, BoxType)
  wire_value::Attr(Wire, WireValue)
  in_wire_value::Attr(InWire, WireValue)
  out_wire_value::Attr(OutWire, WireValue)
  pass_wire_value::Attr(PassWire, WireValue)
end</code></pre><p>The bare minimum diagram language is:</p><pre><code class="language-julia">to_graphviz(WiringDiagrams.DirectedWiringDiagrams.TheoryWiringDiagram)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="389pt" height="406pt"
 viewBox="0.00 0.00 388.68 406.42" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 402.42)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-402.42 384.68,-402.42 384.68,4 -4,4"/>
<!-- n1 -->
<g id="node1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="131.26" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="131.26" y="-14.3" font-family="Times,serif" font-size="14.00">Box</text>
</g>
<!-- n2 -->
<g id="node2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="50.07" cy="-118.76" rx="24.5" ry="24.5"/>
<text text-anchor="middle" x="50.07" y="-115.06" font-family="Times,serif" font-size="14.00">InPort</text>
</g>
<!-- n2&#45;&gt;n1 -->
<g id="edge9" class="edge">
<title>n2&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M65.72,-99.34C79.34,-82.43 99.08,-57.93 113.33,-40.24"/>
<polygon fill="black" stroke="black" points="116.29,-42.15 119.84,-32.17 110.84,-37.76 116.29,-42.15"/>
<text text-anchor="middle" x="48.03" y="-73.59" font-family="Times,serif" font-size="14.00">in_port_box</text>
</g>
<!-- n3 -->
<g id="node3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="254.5" cy="-57.98" rx="31.2" ry="31.2"/>
<text text-anchor="middle" x="254.5" y="-54.28" font-family="Times,serif" font-size="14.00">OutPort</text>
</g>
<!-- n3&#45;&gt;n1 -->
<g id="edge10" class="edge">
<title>n3&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M224.67,-48.3C204.4,-41.73 177.83,-33.11 158.21,-26.74"/>
<polygon fill="black" stroke="black" points="159.24,-23.4 148.65,-23.64 157.08,-30.06 159.24,-23.4"/>
<text text-anchor="middle" x="144.94" y="-41.32" font-family="Times,serif" font-size="14.00">out_port_box</text>
</g>
<!-- n4 -->
<g id="node4" class="node">
<title>n4</title>
<ellipse fill="none" stroke="black" cx="109.73" cy="-344.43" rx="47.1" ry="47.1"/>
<text text-anchor="middle" x="109.73" y="-340.73" font-family="Times,serif" font-size="14.00">OuterInPort</text>
</g>
<!-- n5 -->
<g id="node5" class="node">
<title>n5</title>
<ellipse fill="none" stroke="black" cx="326.78" cy="-280.16" rx="53.8" ry="53.8"/>
<text text-anchor="middle" x="326.78" y="-276.46" font-family="Times,serif" font-size="14.00">OuterOutPort</text>
</g>
<!-- n6 -->
<g id="node6" class="node">
<title>n6</title>
<ellipse fill="none" stroke="black" cx="156.31" cy="-101.68" rx="18.9" ry="18.9"/>
<text text-anchor="middle" x="156.31" y="-97.98" font-family="Times,serif" font-size="14.00">Wire</text>
</g>
<!-- n6&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n6&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M137.8,-104.65C123.19,-107 102.39,-110.35 84.71,-113.19"/>
<polygon fill="black" stroke="black" points="84.05,-109.75 74.73,-114.8 85.16,-116.66 84.05,-109.75"/>
<text text-anchor="middle" x="100.26" y="-112.72" font-family="Times,serif" font-size="14.00">tgt</text>
</g>
<!-- n6&#45;&gt;n3 -->
<g id="edge1" class="edge">
<title>n6&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M173.41,-94.07C185.22,-88.81 201.4,-81.61 216.21,-75.02"/>
<polygon fill="black" stroke="black" points="217.96,-78.07 225.68,-70.81 215.12,-71.68 217.96,-78.07"/>
<text text-anchor="middle" x="205.81" y="-88.34" font-family="Times,serif" font-size="14.00">src</text>
</g>
<!-- n7 -->
<g id="node7" class="node">
<title>n7</title>
<ellipse fill="none" stroke="black" cx="34.89" cy="-244.27" rx="26.9" ry="26.9"/>
<text text-anchor="middle" x="34.89" y="-240.57" font-family="Times,serif" font-size="14.00">InWire</text>
</g>
<!-- n7&#45;&gt;n2 -->
<g id="edge4" class="edge">
<title>n7&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M38.14,-217.35C40.4,-198.7 43.42,-173.71 45.86,-153.55"/>
<polygon fill="black" stroke="black" points="49.35,-153.86 47.07,-143.51 42.4,-153.02 49.35,-153.86"/>
<text text-anchor="middle" x="21" y="-189.25" font-family="Times,serif" font-size="14.00">in_tgt</text>
</g>
<!-- n7&#45;&gt;n4 -->
<g id="edge3" class="edge">
<title>n7&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M51.12,-266.01C58.18,-275.45 66.74,-286.9 75.11,-298.1"/>
<polygon fill="black" stroke="black" points="72.35,-300.26 81.14,-306.18 77.96,-296.07 72.35,-300.26"/>
<text text-anchor="middle" x="41.62" y="-285.85" font-family="Times,serif" font-size="14.00">in_src</text>
</g>
<!-- n8 -->
<g id="node8" class="node">
<title>n8</title>
<ellipse fill="none" stroke="black" cx="335.29" cy="-155.4" rx="33.6" ry="33.6"/>
<text text-anchor="middle" x="335.29" y="-151.7" font-family="Times,serif" font-size="14.00">OutWire</text>
</g>
<!-- n8&#45;&gt;n3 -->
<g id="edge5" class="edge">
<title>n8&#45;&gt;n3</title>
<path fill="none" stroke="black" d="M313.85,-129.55C303.79,-117.41 291.69,-102.83 281.05,-90"/>
<polygon fill="black" stroke="black" points="283.73,-87.74 274.65,-82.28 278.34,-92.21 283.73,-87.74"/>
<text text-anchor="middle" x="271.45" y="-113.57" font-family="Times,serif" font-size="14.00">out_src</text>
</g>
<!-- n8&#45;&gt;n5 -->
<g id="edge6" class="edge">
<title>n8&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M332.99,-189.16C332.42,-197.53 331.79,-206.79 331.15,-216.09"/>
<polygon fill="black" stroke="black" points="327.65,-215.95 330.46,-226.16 334.64,-216.42 327.65,-215.95"/>
<text text-anchor="middle" x="306.07" y="-206.42" font-family="Times,serif" font-size="14.00">out_tgt</text>
</g>
<!-- n9 -->
<g id="node9" class="node">
<title>n9</title>
<ellipse fill="none" stroke="black" cx="232.84" cy="-361.57" rx="36.7" ry="36.7"/>
<text text-anchor="middle" x="232.84" y="-357.87" font-family="Times,serif" font-size="14.00">PassWire</text>
</g>
<!-- n9&#45;&gt;n4 -->
<g id="edge7" class="edge">
<title>n9&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M196.23,-356.47C186.98,-355.18 176.83,-353.77 166.83,-352.38"/>
<polygon fill="black" stroke="black" points="167.31,-348.91 156.93,-351 166.35,-355.85 167.31,-348.91"/>
<text text-anchor="middle" x="166.28" y="-343.23" font-family="Times,serif" font-size="14.00">pass_src</text>
</g>
<!-- n9&#45;&gt;n5 -->
<g id="edge8" class="edge">
<title>n9&#45;&gt;n5</title>
<path fill="none" stroke="black" d="M260.77,-337.36C266.32,-332.55 272.3,-327.37 278.31,-322.16"/>
<polygon fill="black" stroke="black" points="280.65,-324.76 285.91,-315.57 276.06,-319.47 280.65,-324.76"/>
<text text-anchor="middle" x="300.04" y="-333.56" font-family="Times,serif" font-size="14.00">pass_tgt</text>
</g>
</g>
</svg>
<p>And then you can add back in the types.</p><pre><code class="language-julia">to_graphviz(WiringDiagrams.DirectedWiringDiagrams.TheoryTypedWiringDiagram)

#Layout is hard, so if you want to understand the `TheoryAttributedWiringDiagrams`, you should do the layout by hand as an exercise.</code></pre><p>We can create our own version of the theory of DWDs to see how it works:</p><pre><code class="language-julia">@present MyTheoryWiringDiagram(FreeSchema) begin
  Box::Ob
  (InPort, OutPort, OuterInPort, OuterOutPort)::Ob
  (Wire, InWire, OutWire, PassWire)::Ob

  src::Hom(Wire, OutPort)
  tgt::Hom(Wire, InPort)
  in_src::Hom(InWire, OuterInPort)
  in_tgt::Hom(InWire, InPort)
  out_src::Hom(OutWire, OutPort)
  out_tgt::Hom(OutWire, OuterOutPort)
  pass_src::Hom(PassWire, OuterInPort)
  pass_tgt::Hom(PassWire, OuterOutPort)

  in_port_box::Hom(InPort, Box)
  out_port_box::Hom(OutPort, Box)
end</code></pre><pre class="documenter-example-output">Presentation{Schema, Symbol}(Catlab.Theories.FreeSchema, (Ob = Catlab.Theories.FreeSchema.Ob{:generator}[Box, InPort, OutPort, OuterInPort, OuterOutPort, Wire, InWire, OutWire, PassWire], Hom = Catlab.Theories.FreeSchema.Hom{:generator}[src, tgt, in_src, in_tgt, out_src, out_tgt, pass_src, pass_tgt, in_port_box, out_port_box], AttrType = Catlab.Theories.FreeSchema.AttrType{:generator}[], Attr = Catlab.Theories.FreeSchema.Attr{:generator}[]), Dict(:InPort =&gt; (:Ob =&gt; 2), :InWire =&gt; (:Ob =&gt; 7), :in_port_box =&gt; (:Hom =&gt; 9), :Box =&gt; (:Ob =&gt; 1), :OuterOutPort =&gt; (:Ob =&gt; 5), :in_src =&gt; (:Hom =&gt; 3), :in_tgt =&gt; (:Hom =&gt; 4), :src =&gt; (:Hom =&gt; 1), :OuterInPort =&gt; (:Ob =&gt; 4), :out_port_box =&gt; (:Hom =&gt; 10)…), Pair[])</pre><p>If your application of wiring diagrams needs to attach numeric or textual information to the boxes of a wiring diagram, you would extend the <code>TheoryWiringDiagram</code> with the attributes that you need. That will give you a custom data structure that has those fields. One of the goals of Catlab is to make it so much easier to generate custom data structures that interoperate, that you don&#39;t need to create generic structures that can be used for many purposes. Just snap your fingers and create a new structure perfectly tailored to your needs, when your needs change, snap again to get a new version of that structure.</p><p>The <code>@acset_type</code> macro does the hard work of generating the data structure and accessors and mutators for you. The form of this call is <code>@acset_type NewStructName(Schema, index=[morphisms in Schema]) &lt;: Supertype</code>. You should index any morphism where you need to use <code>incident</code> frequently. For wiring diagrams you will often want to know what all the wires that are incident to a port.</p><pre><code class="language-julia">@acset_type MyWiringDiagramACSet(MyTheoryWiringDiagram,
  index=[:src, :tgt, :in_src, :in_tgt, :out_src, :out_tgt, :pass_src, :pass_tgt]) &lt;: WiringDiagrams.DirectedWiringDiagrams.AbstractWiringDiagram</code></pre><pre class="documenter-example-output">Main.ex-wd_cset.MyWiringDiagramACSet</pre><p>We get the <code>@acset</code> macro from Catlab and can create DWDs by hand. It is very tedious, which is why the <code>@program</code> macro exists!</p><pre><code class="language-julia">md = @acset MyWiringDiagramACSet begin
  Box = 3
  InPort = 6
  OutPort = 3
  Wire = 3
  src = [1,2,3]
  tgt = [3,4,5]
  in_port_box = [1,1,2,2,3,3]
  out_port_box = [1,2,3]
end</code></pre><div class="c-set">
<span class="c-set-summary">Main.ex-wd_cset.MyWiringDiagramACSet with elements Box = 1:3, InPort = 1:6, OutPort = 1:3, OuterInPort = 1:0, OuterOutPort = 1:0, Wire = 1:3, InWire = 1:0, OutWire = 1:0, PassWire = 1:0</span>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">InPort</th>
      <th style = "text-align: right;">in_port_box</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">6</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OutPort</th>
      <th style = "text-align: right;">out_port_box</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Wire</th>
      <th style = "text-align: right;">src</th>
      <th style = "text-align: right;">tgt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">4</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">5</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="Undirected-Wiring-Diagrams"><a class="docs-heading-anchor" href="#Undirected-Wiring-Diagrams">Undirected Wiring Diagrams</a><a id="Undirected-Wiring-Diagrams-1"></a><a class="docs-heading-anchor-permalink" href="#Undirected-Wiring-Diagrams" title="Permalink"></a></h2><p>A much simpler structure than DWDs are known as undirected wiring diagrams. They are called undirected because ports boxes have one set of ports that aren&#39;t divided into inputs and outputs, and the wires are undirected. Wires connect junctions to ports (which live on boxes).</p><pre><code class="language-julia">to_graphviz(WiringDiagrams.UndirectedWiringDiagrams.TheoryUWD)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="387pt" height="107pt"
 viewBox="0.00 0.00 386.59 107.27" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 103.27)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-103.27 382.59,-103.27 382.59,4 -4,4"/>
<!-- n1 -->
<g id="node1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="18" cy="-51.55" rx="18" ry="18"/>
<text text-anchor="middle" x="18" y="-47.85" font-family="Times,serif" font-size="14.00">Box</text>
</g>
<!-- n2 -->
<g id="node2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="125.56" cy="-62.85" rx="18" ry="18"/>
<text text-anchor="middle" x="125.56" y="-59.15" font-family="Times,serif" font-size="14.00">Port</text>
</g>
<!-- n2&#45;&gt;n1 -->
<g id="edge1" class="edge">
<title>n2&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M107.31,-60.93C90.52,-59.17 65.37,-56.53 46.03,-54.5"/>
<polygon fill="black" stroke="black" points="46.29,-51 35.98,-53.44 45.56,-57.97 46.29,-51"/>
<text text-anchor="middle" x="63.67" y="-61.51" font-family="Times,serif" font-size="14.00">box</text>
</g>
<!-- n4 -->
<g id="node4" class="node">
<title>n4</title>
<ellipse fill="none" stroke="black" cx="233.92" cy="-66.81" rx="32.4" ry="32.4"/>
<text text-anchor="middle" x="233.92" y="-63.11" font-family="Times,serif" font-size="14.00">Junction</text>
</g>
<!-- n2&#45;&gt;n4 -->
<g id="edge2" class="edge">
<title>n2&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M143.94,-63.52C156.94,-64 174.92,-64.65 191.39,-65.26"/>
<polygon fill="black" stroke="black" points="191.27,-68.75 201.39,-65.62 191.53,-61.76 191.27,-68.75"/>
<text text-anchor="middle" x="167.67" y="-53.19" font-family="Times,serif" font-size="14.00">junction</text>
</g>
<!-- n3 -->
<g id="node3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="338.99" cy="-39.6" rx="39.7" ry="39.7"/>
<text text-anchor="middle" x="338.99" y="-35.9" font-family="Times,serif" font-size="14.00">OuterPort</text>
</g>
<!-- n3&#45;&gt;n4 -->
<g id="edge3" class="edge">
<title>n3&#45;&gt;n4</title>
<path fill="none" stroke="black" d="M300.46,-49.58C292.3,-51.69 283.65,-53.93 275.39,-56.07"/>
<polygon fill="black" stroke="black" points="274.36,-52.73 265.55,-58.62 276.11,-59.5 274.36,-52.73"/>
<text text-anchor="middle" x="262.18" y="-41.63" font-family="Times,serif" font-size="14.00">outer_junction</text>
</g>
</g>
</svg>
<p>These UWDs are combinatorial syntax for relations. The junctions are variables and the boxes are the relations. A relation R ⊆ X × Y has two ports one for the value of X and one for the value of Y. The expression R(x:X, y:Y) says to connect the X port of R to the junction for the variable x, and the Y port of R to the y variable junction. If two ports are attached to the same junction, then you have a constraint that those values must be equal. The outer ports are the components of the final relation. For example the following UWD encodes the relation {(x,y,z) | R(x,y) and S(y,z) for all x∈X, y∈Y, z∈Z}.</p><pre><code class="language-julia">uwd = @relation (x, y, z) begin
  R(x,y)
  S(y,z)
end</code></pre><div class="c-set">
<span class="c-set-summary">Catlab.Programs.RelationalPrograms.UntypedUnnamedRelationDiagram{Symbol, Symbol} with elements Box = 1:2, Port = 1:4, OuterPort = 1:3, Junction = 1:3</span>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Box</th>
      <th style = "text-align: right;">name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">R</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">S</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Port</th>
      <th style = "text-align: right;">box</th>
      <th style = "text-align: right;">junction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OuterPort</th>
      <th style = "text-align: right;">outer_junction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Junction</th>
      <th style = "text-align: right;">variable</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">x</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">y</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">z</td>
    </tr>
  </tbody>
</table>
</div>
<p>These UWDs are drawn with circular boxes and undirected wires. Note that since all wires go from junction to port, they are not <em>symmetric</em> wires.</p><pre><code class="language-julia">draw(uwd)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="187pt" height="135pt"
 viewBox="0.00 0.00 186.89 134.75" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 130.75)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-130.75 182.89,-130.75 182.89,4 -4,4"/>
<!-- n1 -->
<g id="box1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="45.04" cy="-58.91" rx="18" ry="18"/>
<text text-anchor="middle" x="45.04" y="-55.21" font-family="Serif" font-size="14.00">R</text>
</g>
<!-- n6 -->
<!-- junction -->
<g id="junction1" class="node">
<title>n6</title>
<ellipse fill="black" stroke="black" cx="21.68" cy="-30.15" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="14.68" y="-36.45" font-family="Serif" font-size="14.00">x</text>
</g>
<!-- n1&#45;&#45;n6 -->
<g id="edge1" class="edge">
<title>n1&#45;&#45;n6</title>
<path fill="none" stroke="black" d="M33.63,-44.87C29.56,-39.85 25.44,-34.77 23.26,-32.09"/>
</g>
<!-- n7 -->
<!-- junction -->
<g id="junction2" class="node">
<title>n7</title>
<ellipse fill="black" stroke="black" cx="67.04" cy="-91.33" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="60.04" y="-97.63" font-family="Serif" font-size="14.00">y</text>
</g>
<!-- n1&#45;&#45;n7 -->
<g id="edge3" class="edge">
<title>n1&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M55.27,-73.98C59.22,-79.8 63.3,-85.82 65.47,-89.01"/>
</g>
<!-- n2 -->
<g id="box2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="106.19" cy="-93.23" rx="18" ry="18"/>
<text text-anchor="middle" x="106.19" y="-89.53" font-family="Serif" font-size="14.00">S</text>
</g>
<!-- n2&#45;&#45;n7 -->
<g id="edge4" class="edge">
<title>n2&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M87.99,-92.35C80.8,-92 73.37,-91.64 69.59,-91.45"/>
</g>
<!-- n8 -->
<!-- junction -->
<g id="junction3" class="node">
<title>n8</title>
<ellipse fill="black" stroke="black" cx="143.04" cy="-97.39" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="136.54" y="-103.69" font-family="Serif" font-size="14.00">z</text>
</g>
<!-- n2&#45;&#45;n8 -->
<g id="edge6" class="edge">
<title>n2&#45;&#45;n8</title>
<path fill="none" stroke="black" d="M124.18,-95.26C130.61,-95.99 137.11,-96.72 140.55,-97.11"/>
</g>
<!-- n3 -->
<!-- n3&#45;&#45;n6 -->
<g id="edge2" class="edge">
<title>n3&#45;&#45;n6</title>
<path fill="none" stroke="black" d="M1.02,-1.23C3.67,-4.94 15.66,-21.71 20.06,-27.87"/>
</g>
<!-- n4 -->
<!-- n4&#45;&#45;n7 -->
<g id="edge5" class="edge">
<title>n4&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M47.82,-125.39C50.33,-120.94 61.87,-100.5 65.76,-93.61"/>
</g>
<!-- n5 -->
<!-- n5&#45;&#45;n8 -->
<g id="edge7" class="edge">
<title>n5&#45;&#45;n8</title>
<path fill="none" stroke="black" d="M177.52,-106.05C173.1,-104.94 153.1,-99.92 145.75,-98.07"/>
</g>
</g>
</svg>
<p>By adding more relations we can get bigger relations.</p><pre><code class="language-julia">uwd₂ = @relation (x, z) begin
  R(x,y)
  S(y,z)
  T(x,z,y)
end</code></pre><div class="c-set">
<span class="c-set-summary">Catlab.Programs.RelationalPrograms.UntypedUnnamedRelationDiagram{Symbol, Symbol} with elements Box = 1:3, Port = 1:7, OuterPort = 1:2, Junction = 1:3</span>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Box</th>
      <th style = "text-align: right;">name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">R</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">S</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">T</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Port</th>
      <th style = "text-align: right;">box</th>
      <th style = "text-align: right;">junction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">6</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">7</td>
      <td style = "text-align: right;">3</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">OuterPort</th>
      <th style = "text-align: right;">outer_junction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Junction</th>
      <th style = "text-align: right;">variable</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">x</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">z</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">y</td>
    </tr>
  </tbody>
</table>
</div>
<p>Not all of the junctions have to be exposed to the outside world. Note that there is no distinction between arguments and return values in the relation macro. This is because relations are inherently undirected, unlike functions.</p><pre><code class="language-julia">draw(uwd₂)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="144pt" height="109pt"
 viewBox="0.00 0.00 143.89 109.02" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 105.02)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-105.02 139.89,-105.02 139.89,4 -4,4"/>
<!-- n1 -->
<g id="box1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="39.5" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="39.5" y="-14.3" font-family="Serif" font-size="14.00">R</text>
</g>
<!-- n6 -->
<!-- junction -->
<g id="junction1" class="node">
<title>n6</title>
<ellipse fill="black" stroke="black" cx="32.91" cy="-58.15" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="25.91" y="-64.45" font-family="Serif" font-size="14.00">x</text>
</g>
<!-- n1&#45;&#45;n6 -->
<g id="edge1" class="edge">
<title>n1&#45;&#45;n6</title>
<path fill="none" stroke="black" d="M36.51,-36.19C35.29,-43.66 34,-51.48 33.35,-55.47"/>
</g>
<!-- n8 -->
<!-- junction -->
<g id="junction3" class="node">
<title>n8</title>
<ellipse fill="black" stroke="black" cx="79.14" cy="-21.68" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="72.14" y="-27.98" font-family="Serif" font-size="14.00">y</text>
</g>
<!-- n1&#45;&#45;n8 -->
<g id="edge7" class="edge">
<title>n1&#45;&#45;n8</title>
<path fill="none" stroke="black" d="M57.46,-19.67C64.84,-20.35 72.56,-21.07 76.49,-21.44"/>
</g>
<!-- n2 -->
<g id="box2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="117.82" cy="-31.06" rx="18" ry="18"/>
<text text-anchor="middle" x="117.82" y="-27.36" font-family="Serif" font-size="14.00">S</text>
</g>
<!-- n7 -->
<!-- junction -->
<g id="junction2" class="node">
<title>n7</title>
<ellipse fill="black" stroke="black" cx="111.01" cy="-71.2" rx="2.5" ry="2.5"/>
<text text-anchor="middle" x="104.51" y="-77.5" font-family="Serif" font-size="14.00">z</text>
</g>
<!-- n2&#45;&#45;n7 -->
<g id="edge4" class="edge">
<title>n2&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M114.74,-49.25C113.47,-56.72 112.14,-64.53 111.47,-68.52"/>
</g>
<!-- n2&#45;&#45;n8 -->
<g id="edge8" class="edge">
<title>n2&#45;&#45;n8</title>
<path fill="none" stroke="black" d="M100.29,-26.81C93.09,-25.07 85.56,-23.24 81.72,-22.31"/>
</g>
<!-- n3 -->
<g id="box3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="72.21" cy="-63.23" rx="18" ry="18"/>
<text text-anchor="middle" x="72.21" y="-59.53" font-family="Serif" font-size="14.00">T</text>
</g>
<!-- n3&#45;&#45;n6 -->
<g id="edge2" class="edge">
<title>n3&#45;&#45;n6</title>
<path fill="none" stroke="black" d="M53.94,-60.87C46.72,-59.94 39.26,-58.97 35.46,-58.48"/>
</g>
<!-- n3&#45;&#45;n7 -->
<g id="edge5" class="edge">
<title>n3&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M90.25,-66.93C97.22,-68.36 104.42,-69.84 108.24,-70.63"/>
</g>
<!-- n3&#45;&#45;n8 -->
<g id="edge9" class="edge">
<title>n3&#45;&#45;n8</title>
<path fill="none" stroke="black" d="M75.19,-45.37C76.54,-37.28 77.99,-28.58 78.69,-24.33"/>
</g>
<!-- n4 -->
<!-- n4&#45;&#45;n6 -->
<g id="edge3" class="edge">
<title>n4&#45;&#45;n6</title>
<path fill="none" stroke="black" d="M1.3,-77.77C5.36,-75.25 23.69,-63.87 30.42,-59.69"/>
</g>
<!-- n5 -->
<!-- n5&#45;&#45;n7 -->
<g id="edge6" class="edge">
<title>n5&#45;&#45;n7</title>
<path fill="none" stroke="black" d="M134.79,-99.8C131.74,-96.13 117.95,-79.54 112.89,-73.45"/>
</g>
</g>
</svg>
<h2 id="Circular-Port-Graphs"><a class="docs-heading-anchor" href="#Circular-Port-Graphs">Circular Port Graphs</a><a id="Circular-Port-Graphs-1"></a><a class="docs-heading-anchor-permalink" href="#Circular-Port-Graphs" title="Permalink"></a></h2><p>CPGs are the natural data structure for representing process of interconnected systems that share information along wires, but send different information to their different neighbors.</p><pre><code class="language-julia">to_graphviz(ThCPortGraph)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="146pt" height="232pt"
 viewBox="0.00 0.00 146.36 232.49" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 228.49)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-228.49 142.36,-228.49 142.36,4 -4,4"/>
<!-- n1 -->
<g id="node1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="18" cy="-206.49" rx="18" ry="18"/>
<text text-anchor="middle" x="18" y="-202.79" font-family="Times,serif" font-size="14.00">Box</text>
</g>
<!-- n2 -->
<g id="node2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="86.08" cy="-121.95" rx="18" ry="18"/>
<text text-anchor="middle" x="86.08" y="-118.25" font-family="Times,serif" font-size="14.00">Port</text>
</g>
<!-- n2&#45;&gt;n1 -->
<g id="edge3" class="edge">
<title>n2&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M74.53,-136.29C63.91,-149.49 47.98,-169.26 35.74,-184.46"/>
<polygon fill="black" stroke="black" points="32.93,-182.38 29.38,-192.36 38.38,-186.77 32.93,-182.38"/>
<text text-anchor="middle" x="42.14" y="-164.18" font-family="Times,serif" font-size="14.00">box</text>
</g>
<!-- n3 -->
<g id="node3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="119.66" cy="-18.7" rx="18.9" ry="18.9"/>
<text text-anchor="middle" x="119.66" y="-15" font-family="Times,serif" font-size="14.00">Wire</text>
</g>
<!-- n3&#45;&gt;n2 -->
<g id="edge1" class="edge">
<title>n3&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M109,-34.6C102.03,-50.37 93.81,-74.83 88.94,-93.87"/>
<polygon fill="black" stroke="black" points="85.49,-93.26 86.61,-103.8 92.3,-94.86 85.49,-93.26"/>
<text text-anchor="middle" x="87.97" y="-68.04" font-family="Times,serif" font-size="14.00">src</text>
</g>
<!-- n3&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n3&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M118.92,-37.83C115.29,-54.68 107.55,-79.3 100.29,-97.56"/>
<polygon fill="black" stroke="black" points="96.98,-96.39 96.33,-106.96 103.44,-99.1 96.98,-96.39"/>
<text text-anchor="middle" x="120.61" y="-71.49" font-family="Times,serif" font-size="14.00">tgt</text>
</g>
</g>
</svg>
<p>They are also a kind of CSet, so we can use the <code>@acset</code> macro to construct them.</p><pre><code class="language-julia">cpg = @acset CPortGraph begin
  Box = 3
  Port = 6
  Wire = 5

  box = [1,1,2,2,3,3]
  src = [1,2,5,2,6]
  tgt = [3,4,2,4,1]
end</code></pre><div class="c-set">
<span class="c-set-summary">CPortGraph with elements Box = 1:3, Port = 1:6, Wire = 1:5</span>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Port</th>
      <th style = "text-align: right;">box</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">1</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">6</td>
      <td style = "text-align: right;">3</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr class = "header headerLastRow">
      <th class = "rowNumber">Wire</th>
      <th style = "text-align: right;">src</th>
      <th style = "text-align: right;">tgt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class = "rowNumber">1</td>
      <td style = "text-align: right;">1</td>
      <td style = "text-align: right;">3</td>
    </tr>
    <tr>
      <td class = "rowNumber">2</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">4</td>
    </tr>
    <tr>
      <td class = "rowNumber">3</td>
      <td style = "text-align: right;">5</td>
      <td style = "text-align: right;">2</td>
    </tr>
    <tr>
      <td class = "rowNumber">4</td>
      <td style = "text-align: right;">2</td>
      <td style = "text-align: right;">4</td>
    </tr>
    <tr>
      <td class = "rowNumber">5</td>
      <td style = "text-align: right;">6</td>
      <td style = "text-align: right;">1</td>
    </tr>
  </tbody>
</table>
</div>
<p>the layout for CPGs is not great with graphviz.</p><pre><code class="language-julia">to_graphviz(cpg, port_labels=true, graph_attrs=Dict(&quot;nodesep&quot;=&gt;&quot;2&quot;, &quot;ranksep&quot;=&gt;&quot;2&quot;))</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="242pt" height="196pt"
 viewBox="0.00 0.00 241.88 195.73" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 191.73)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-191.73 237.88,-191.73 237.88,4 -4,4"/>
<!-- n1 -->
<g id="box1" class="node">
<title>n1</title>
<ellipse fill="none" stroke="black" cx="105.19" cy="-79.18" rx="18" ry="18"/>
<text text-anchor="middle" x="105.19" y="-75.48" font-family="Serif" font-size="14.00">n1</text>
</g>
<!-- n2 -->
<g id="box2" class="node">
<title>n2</title>
<ellipse fill="none" stroke="black" cx="127.09" cy="-107.93" rx="18" ry="18"/>
<text text-anchor="middle" x="127.09" y="-104.23" font-family="Serif" font-size="14.00">n2</text>
</g>
<!-- n1&#45;&gt;n2 -->
<g id="edge1" class="edge">
<title>n1&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M90.88,-90.35C0,-162.97 14.59,-187.73 104.23,-124.7"/>
<polygon fill="black" stroke="black" points="106.45,-127.42 112.55,-118.76 102.38,-121.72 106.45,-127.42"/>
<text text-anchor="middle" x="107.55" y="-122.56" font-family="Serif" font-size="14.00">1</text>
<text text-anchor="middle" x="85.88" y="-94.15" font-family="Serif" font-size="14.00">1</text>
</g>
<!-- n1&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n1&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M119.75,-68.35C213.88,0 233.88,-20.64 149.33,-90.34"/>
<polygon fill="black" stroke="black" points="146.95,-87.77 141.39,-96.79 151.36,-93.2 146.95,-87.77"/>
<text text-anchor="middle" x="146.39" y="-85.59" font-family="Serif" font-size="14.00">2</text>
<text text-anchor="middle" x="124.75" y="-57.15" font-family="Serif" font-size="14.00">2</text>
</g>
<!-- n1&#45;&gt;n2 -->
<g id="edge4" class="edge">
<title>n1&#45;&gt;n2</title>
<path fill="none" stroke="black" d="M116.14,-93.56C116.18,-93.61 116.23,-93.67 116.27,-93.73"/>
<polygon fill="black" stroke="black" points="107.55,-88.06 116.4,-93.89 113.12,-83.82 107.55,-88.06"/>
<text text-anchor="middle" x="111.4" y="-82.69" font-family="Serif" font-size="14.00">2</text>
<text text-anchor="middle" x="121.14" y="-82.36" font-family="Serif" font-size="14.00">2</text>
</g>
<!-- n3 -->
<g id="box3" class="node">
<title>n3</title>
<ellipse fill="none" stroke="black" cx="93.12" cy="-45.12" rx="18" ry="18"/>
<text text-anchor="middle" x="93.12" y="-41.42" font-family="Serif" font-size="14.00">n3</text>
</g>
<!-- n3&#45;&gt;n1 -->
<g id="edge3" class="edge">
<title>n3&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M76.43,-51.94C36.27,-70.99 40.08,-92.16 77.6,-86.46"/>
<polygon fill="black" stroke="black" points="78.73,-89.8 87.85,-84.41 77.36,-82.93 78.73,-89.8"/>
<text text-anchor="middle" x="82.85" y="-73.21" font-family="Serif" font-size="14.00">2</text>
<text text-anchor="middle" x="71.43" y="-55.74" font-family="Serif" font-size="14.00">1</text>
</g>
<!-- n3&#45;&gt;n1 -->
<g id="edge5" class="edge">
<title>n3&#45;&gt;n1</title>
<path fill="none" stroke="black" d="M110.38,-39.91C153.57,-29.41 163.93,-48.26 131.2,-67.46"/>
<polygon fill="black" stroke="black" points="129.17,-64.57 121.95,-72.33 132.43,-70.77 129.17,-64.57"/>
<text text-anchor="middle" x="126.95" y="-76.13" font-family="Serif" font-size="14.00">1</text>
<text text-anchor="middle" x="115.38" y="-28.71" font-family="Serif" font-size="14.00">2</text>
</g>
</g>
</svg>
<p>Almost every application of graphs in computer science could be better served by using one of these extensions to the basic graph data structure.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../diagrams_and_expressions/">« Wiring diagrams and syntactic expressions</a><a class="docs-footer-nextpage" href="../../graphics/composejl_wiring_diagrams/">Drawing wiring diagrams in Compose.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 2 March 2022 07:23">Wednesday 2 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
